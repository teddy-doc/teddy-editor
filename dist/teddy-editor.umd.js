(function(g,H){typeof exports=="object"&&typeof module<"u"?module.exports=H(require("react")):typeof define=="function"&&define.amd?define(["react"],H):(g=typeof globalThis<"u"?globalThis:g||self,g.TeddyEditor=H(g.React))})(this,function(g){"use strict";var H={exports:{}},Y={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ae;function pe(){if(ae)return Y;ae=1;var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function c(o,l,t){var a=null;if(t!==void 0&&(a=""+t),l.key!==void 0&&(a=""+l.key),"key"in l){t={};for(var i in l)i!=="key"&&(t[i]=l[i])}else t=l;return l=t.ref,{$$typeof:n,type:o,key:a,ref:l!==void 0?l:null,props:t}}return Y.Fragment=s,Y.jsx=c,Y.jsxs=c,Y}var J={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var le;function xe(){return le||(le=1,process.env.NODE_ENV!=="production"&&function(){function n(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===$?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case h:return"Fragment";case Q:return"Profiler";case M:return"StrictMode";case B:return"Suspense";case I:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(typeof r.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),r.$$typeof){case P:return"Portal";case W:return(r.displayName||"Context")+".Provider";case z:return(r._context.displayName||"Context")+".Consumer";case X:var m=r.render;return r=r.displayName,r||(r=m.displayName||m.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case K:return m=r.displayName||null,m!==null?m:n(r.type)||"Memo";case F:m=r._payload,r=r._init;try{return n(r(m))}catch{}}return null}function s(r){return""+r}function c(r){try{s(r);var m=!1}catch{m=!0}if(m){m=console;var p=m.error,N=typeof Symbol=="function"&&Symbol.toStringTag&&r[Symbol.toStringTag]||r.constructor.name||"Object";return p.call(m,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",N),s(r)}}function o(r){if(r===h)return"<>";if(typeof r=="object"&&r!==null&&r.$$typeof===F)return"<...>";try{var m=n(r);return m?"<"+m+">":"<...>"}catch{return"<...>"}}function l(){var r=f.A;return r===null?null:r.getOwner()}function t(){return Error("react-stack-top-frame")}function a(r){if(C.call(r,"key")){var m=Object.getOwnPropertyDescriptor(r,"key").get;if(m&&m.isReactWarning)return!1}return r.key!==void 0}function i(r,m){function p(){L||(L=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",m))}p.isReactWarning=!0,Object.defineProperty(r,"key",{get:p,configurable:!0})}function d(){var r=n(this.type);return j[r]||(j[r]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),r=this.props.ref,r!==void 0?r:null}function u(r,m,p,N,T,O,re,oe){return p=O.ref,r={$$typeof:A,type:r,key:m,props:O,_owner:T},(p!==void 0?p:null)!==null?Object.defineProperty(r,"ref",{enumerable:!1,get:d}):Object.defineProperty(r,"ref",{enumerable:!1,value:null}),r._store={},Object.defineProperty(r._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(r,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(r,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:re}),Object.defineProperty(r,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:oe}),Object.freeze&&(Object.freeze(r.props),Object.freeze(r)),r}function b(r,m,p,N,T,O,re,oe){var k=m.children;if(k!==void 0)if(N)if(E(k)){for(N=0;N<k.length;N++)y(k[N]);Object.freeze&&Object.freeze(k)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else y(k);if(C.call(m,"key")){k=n(r);var U=Object.keys(m).filter(function(Ge){return Ge!=="key"});N=0<U.length?"{key: someKey, "+U.join(": ..., ")+": ...}":"{key: someKey}",S[k+N]||(U=0<U.length?"{"+U.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,N,k,U,k),S[k+N]=!0)}if(k=null,p!==void 0&&(c(p),k=""+p),a(m)&&(c(m.key),k=""+m.key),"key"in m){p={};for(var se in m)se!=="key"&&(p[se]=m[se])}else p=m;return k&&i(p,typeof r=="function"?r.displayName||r.name||"Unknown":r),u(r,k,O,T,l(),p,re,oe)}function y(r){typeof r=="object"&&r!==null&&r.$$typeof===A&&r._store&&(r._store.validated=1)}var x=g,A=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),W=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),$=Symbol.for("react.client.reference"),f=x.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,C=Object.prototype.hasOwnProperty,E=Array.isArray,_=console.createTask?console.createTask:function(){return null};x={"react-stack-bottom-frame":function(r){return r()}};var L,j={},w=x["react-stack-bottom-frame"].bind(x,t)(),R=_(o(t)),S={};J.Fragment=h,J.jsx=function(r,m,p,N,T){var O=1e4>f.recentlyCreatedOwnerStacks++;return b(r,m,p,!1,N,T,O?Error("react-stack-top-frame"):w,O?_(o(r)):R)},J.jsxs=function(r,m,p,N,T){var O=1e4>f.recentlyCreatedOwnerStacks++;return b(r,m,p,!0,N,T,O?Error("react-stack-top-frame"):w,O?_(o(r)):R)}}()),J}var ce;function be(){return ce||(ce=1,process.env.NODE_ENV==="production"?H.exports=pe():H.exports=xe()),H.exports}var e=be();/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ne=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,c,o)=>o?o.toUpperCase():c.toLowerCase()),ie=n=>{const s=Ne(n);return s.charAt(0).toUpperCase()+s.slice(1)},de=(...n)=>n.filter((s,c,o)=>!!s&&s.trim()!==""&&o.indexOf(s)===c).join(" ").trim(),we=n=>{for(const s in n)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=g.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:o,className:l="",children:t,iconNode:a,...i},d)=>g.createElement("svg",{ref:d,...Ee,width:s,height:s,stroke:n,strokeWidth:o?Number(c)*24/Number(s):c,className:de("lucide",l),...!t&&!we(i)&&{"aria-hidden":"true"},...i},[...a.map(([u,b])=>g.createElement(u,b)),...Array.isArray(t)?t:[t]]));/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=(n,s)=>{const c=g.forwardRef(({className:o,...l},t)=>g.createElement(ve,{ref:t,iconNode:s,className:de(`lucide-${ye(ie(n))}`,`lucide-${n}`,o),...l}));return c.displayName=ie(n),c};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=v("align-center",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=v("align-justify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=v("align-left",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=v("align-right",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=v("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=v("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=v("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=v("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=v("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=v("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=v("list-ordered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=v("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=v("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=v("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=v("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=v("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),G=(n,s,c)=>{const o=window.getSelection();if(!o||o.rangeCount===0||!s.current)return;const l=o.getRangeAt(0);if(l.toString())try{const t=()=>{let u=l.commonAncestorContainer;for(;u&&u!==s.current;){if(u.nodeType===Node.ELEMENT_NODE){const b=u;if(b.tagName.toLowerCase()===n.toLowerCase())return{isFormatted:!0,formatElement:b}}u=u.parentNode}return{isFormatted:!1,formatElement:null}},{isFormatted:a,formatElement:i}=t();let d=null;if(a&&i){const u=i.parentNode,b=document.createTextNode(i.textContent||"");u?.replaceChild(b,i),u?.normalize();const y=document.createRange();y.selectNodeContents(b),o.removeAllRanges(),o.addRange(y)}else{d=document.createElement(n);try{l.surroundContents(d);const u=document.createRange();u.selectNodeContents(d),o.removeAllRanges(),o.addRange(u)}catch{const b=l.extractContents();d.appendChild(b),l.insertNode(d);const y=document.createRange();y.selectNodeContents(d),o.removeAllRanges(),o.addRange(y)}}c()}catch(t){console.warn("Error applying format:",t),c()}},me=({editorRef:n,activeFormats:s,updateActiveFormats:c,getButtonClass:o})=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>G("strong",n,c),className:o(s.bold),title:"Bold",children:e.jsx(Re,{size:18})}),e.jsx("button",{onClick:()=>G("em",n,c),className:o(s.italic),title:"Italic",children:e.jsx(Ae,{size:18})}),e.jsx("button",{onClick:()=>G("u",n,c),className:o(s.underline),title:"Underline",children:e.jsx(He,{size:18})}),e.jsx("button",{onClick:()=>G("s",n,c),className:o(s.strikethrough),title:"Strikethrough",children:e.jsx(Ie,{size:18})})]}),Z=(n,s)=>{const c=window.getSelection();if(!c||c.rangeCount===0)return;let l=c.getRangeAt(0).commonAncestorContainer;for(;l&&l.nodeType!==Node.ELEMENT_NODE;)l=l.parentNode;if(l&&l.nodeType===Node.ELEMENT_NODE){const t=l;t.style.textAlign=n==="left"?"":n,s()}},ge=({activeFormats:n,updateActiveFormats:s,getButtonClass:c})=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>Z("left",s),className:c(n.alignLeft),title:"Align Left",children:e.jsx(Ce,{size:18})}),e.jsx("button",{onClick:()=>Z("center",s),className:c(n.alignCenter),title:"Align Center",children:e.jsx(je,{size:18})}),e.jsx("button",{onClick:()=>Z("right",s),className:c(n.alignRight),title:"Align Right",children:e.jsx(_e,{size:18})}),e.jsx("button",{onClick:()=>Z("justify",s),className:c(n.alignJustify),title:"Justify",children:e.jsx(ke,{size:18})})]}),fe=(n,s,c)=>{const o=window.getSelection();if(!o||o.rangeCount===0||!s.current)return;const l=o.getRangeAt(0);let t=l.commonAncestorContainer;t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let a=t;for(;a&&a!==s.current&&!["P","H1","H2","H3","H4","H5","H6","LI","UL","OL"].includes(a.tagName);)a=a.parentElement;if(!a||a===s.current){const i=document.createElement(n),d=document.createElement("li");d.textContent=o.toString()||"List item",i.appendChild(d),l.deleteContents(),l.insertNode(i);const u=document.createRange();u.setStart(d,0),u.setEnd(d,d.childNodes.length),o.removeAllRanges(),o.addRange(u)}else if(a.tagName==="LI"){const i=a.parentElement;if(i.tagName.toLowerCase()===n){const d=document.createElement("p");d.innerHTML=a.innerHTML,i.parentNode?.replaceChild(d,i)}else{const d=document.createElement(n);d.innerHTML=i.innerHTML,i.parentNode?.replaceChild(d,i)}}else{const i=document.createElement(n),d=document.createElement("li");d.innerHTML=a.innerHTML,i.appendChild(d),a.parentNode?.replaceChild(i,a)}c()},he=({editorRef:n,activeFormats:s,updateActiveFormats:c,getButtonClass:o})=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{n?.current&&fe("ul",n,c)},className:o(s.bulletList),title:"Bullet List",children:e.jsx(Oe,{size:18})}),e.jsx("button",{onClick:()=>{n?.current&&fe("ol",n,c)},className:o(s.numberedList),title:"Numbered List",children:e.jsx(Me,{size:18})})]}),ze=({editorRef:n,activeFormats:s,currentTextFormat:c,updateActiveFormats:o,applyTextFormat:l})=>{const[t,a]=g.useState({top:0,left:0}),[i,d]=g.useState(!1),[u,b]=g.useState(!1),y=g.useRef(null),x=[{value:"p",label:"Paragraph",tag:"p"},{value:"h1",label:"Heading 1",tag:"h1"},{value:"h2",label:"Heading 2",tag:"h2"},{value:"h3",label:"Heading 3",tag:"h3"},{value:"h4",label:"Heading 4",tag:"h4"},{value:"h5",label:"Heading 5",tag:"h5"},{value:"h6",label:"Heading 6",tag:"h6"}];g.useEffect(()=>{const h=()=>{const M=window.getSelection();if(!M||M.rangeCount===0||M.isCollapsed||!n.current||!n.current.contains(M.anchorNode)){d(!1),b(!1);return}const z=M.getRangeAt(0).getBoundingClientRect(),W=y.current?.offsetHeight||50,X=z.top-W-45,B=z.left+z.width/2;a({top:X,left:B}),d(!0)};return document.addEventListener("selectionchange",h),window.addEventListener("scroll",h,!0),window.addEventListener("resize",h),()=>{document.removeEventListener("selectionchange",h),window.removeEventListener("scroll",h,!0),window.removeEventListener("resize",h)}},[n]);const A=h=>`p-1.5 rounded transition-colors ${h?"bg-blue-100 text-blue-600 hover:bg-blue-200":"text-gray-600 hover:bg-gray-100"}`,P=h=>{l(h),b(!1)};return i?e.jsxs("div",{ref:y,className:"fixed z-50 flex items-center gap-1 p-1 bg-white rounded-lg shadow-lg border border-gray-200 animate-in fade-in zoom-in-95 duration-200",style:{top:`${t.top}px`,left:`${t.left}px`,transform:"translateX(-50%)"},onMouseDown:h=>{h.preventDefault()},children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>b(!u),className:"flex items-center gap-1 px-2 py-1.5 text-sm text-gray-700 hover:bg-gray-100 rounded min-w-[100px] justify-between",children:[e.jsx("span",{className:"truncate max-w-[80px]",children:x.find(h=>h.value===c)?.label||"Paragraph"}),e.jsx(ue,{size:12})]}),u&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-xl overflow-hidden min-w-[140px] max-h-[300px] overflow-y-auto",children:x.map(h=>e.jsx("button",{onClick:()=>P(h.tag),className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${c===h.value?"bg-blue-50 text-blue-600":"text-gray-700"}`,children:h.label},h.value))})]}),e.jsx("div",{className:"w-px h-5 bg-gray-200 mx-1"}),e.jsx(me,{editorRef:n,activeFormats:s,updateActiveFormats:o,getButtonClass:A}),e.jsx("div",{className:"w-px h-5 bg-gray-200 mx-1"}),e.jsx(he,{editorRef:n,activeFormats:{bulletList:s.bulletList,numberedList:s.numberedList},updateActiveFormats:o,getButtonClass:A}),e.jsx("div",{className:"w-px h-5 bg-gray-200 mx-1"}),e.jsx(ge,{activeFormats:{alignLeft:s.alignLeft,alignCenter:s.alignCenter,alignRight:s.alignRight,alignJustify:s.alignJustify},updateActiveFormats:o,getButtonClass:A})]}):null};let D=null;const ee=()=>{const n=window.getSelection();n&&n.rangeCount>0&&(D=n.getRangeAt(0).cloneRange())},te=()=>{if(D){const n=window.getSelection();n?.removeAllRanges(),n?.addRange(D)}},ne=()=>{const n=window.getSelection();if(!n||n.rangeCount===0)return null;let c=n.getRangeAt(0).commonAncestorContainer;c.nodeType===Node.TEXT_NODE&&(c=c.parentNode);let o=c;for(;o&&o!==document.body;){if(o.nodeType===Node.ELEMENT_NODE){const l=o,t=l.tagName.toLowerCase();if(t==="a")return{type:"link",url:l.getAttribute("href")||"",text:l.textContent||""};if(t==="img")return{type:"image",src:l.getAttribute("src")||"",alt:l.getAttribute("alt")||""};if(t==="iframe")return{type:"video",src:l.getAttribute("src")||""}}o=o.parentNode}return null},Fe=(n,s)=>{te();const c=window.getSelection();if(!c||c.rangeCount===0){const a=document.querySelector('[contenteditable="true"]');if(a){const i=document.createElement("a");i.href=n,i.textContent=s||n,i.target="_blank",i.rel="noopener noreferrer",i.className="text-blue-600 underline hover:text-blue-800",a.appendChild(i);const d=document.createTextNode(" ");a.appendChild(d);const u=document.createRange();u.setStartAfter(d),u.collapse(!0),c&&(c.removeAllRanges(),c.addRange(u))}return}const o=c.getRangeAt(0);let l=null,t=o.commonAncestorContainer;for(;t&&t!==document.body;){if(t.nodeType===Node.ELEMENT_NODE&&t.tagName.toLowerCase()==="a"){l=t;break}t=t.parentNode}if(l)l.setAttribute("href",n),l.textContent=s||n;else{const a=document.createElement("a");a.href=n,a.textContent=s||n,a.target="_blank",a.rel="noopener noreferrer",a.className="text-blue-600 underline hover:text-blue-800",o.deleteContents(),o.insertNode(a);const i=document.createRange();i.setStartAfter(a),i.collapse(!0),c.removeAllRanges(),c.addRange(i)}D=null},Ve=(n,s="Inserted image")=>{te();const c=window.getSelection();if(!c||c.rangeCount===0){const a=document.querySelector('[contenteditable="true"]');if(a){const i=document.createElement("img");i.src=n,i.alt=s,i.className="max-w-full h-auto rounded shadow-sm",a.appendChild(i);const d=document.createElement("br");a.appendChild(d);const u=document.createRange();u.setStartAfter(d),u.collapse(!0),c&&(c.removeAllRanges(),c.addRange(u))}return}const o=c.getRangeAt(0);let l=null,t=o.commonAncestorContainer;for(;t&&t!==document.body;){if(t.nodeType===Node.ELEMENT_NODE&&t.tagName.toLowerCase()==="img"){l=t;break}t=t.parentNode}if(l)l.setAttribute("src",n),l.setAttribute("alt",s);else{const a=document.createElement("img");a.src=n,a.alt=s,a.className="max-w-full h-auto rounded shadow-sm",o.deleteContents(),o.insertNode(a);const i=document.createRange();i.setStartAfter(a),i.collapse(!0),c.removeAllRanges(),c.addRange(i)}D=null},De=n=>{te();const s=window.getSelection();if(!s||s.rangeCount===0){const t=document.querySelector('[contenteditable="true"]');if(t){const a=document.createElement("iframe");a.src=n,a.width="560",a.height="315",a.className="max-w-full rounded shadow-sm",a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen","true"),t.appendChild(a);const i=document.createElement("br");t.appendChild(i);const d=document.createRange();d.setStartAfter(i),d.collapse(!0),s&&(s.removeAllRanges(),s.addRange(d))}return}const c=s.getRangeAt(0);let o=null,l=c.commonAncestorContainer;for(;l&&l!==document.body;){if(l.nodeType===Node.ELEMENT_NODE&&l.tagName.toLowerCase()==="iframe"){o=l;break}l=l.parentNode}if(o)o.setAttribute("src",n);else{const t=document.createElement("iframe");t.src=n,t.width="560",t.height="315",t.className="max-w-full rounded shadow-sm",t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),c.deleteContents(),c.insertNode(t);const a=document.createRange();a.setStartAfter(t),a.collapse(!0),s.removeAllRanges(),s.addRange(a)}D=null},Ue=({isOpen:n,onClose:s,onInsert:c,initialData:o})=>{const[l,t]=g.useState(""),[a,i]=g.useState("");g.useEffect(()=>{n&&o?(t(o.url),i(o.text)):n&&!o&&(t(""),i(""))},[n,o]);const d=u=>{u.preventDefault(),l.trim()&&(c(l.trim(),a.trim()),t(""),i(""),s())};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:o?"Edit Link":"Insert Link"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx(q,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL"}),e.jsx("input",{type:"url",value:l,onChange:u=>t(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com",required:!0,autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link Text (optional)"}),e.jsx("input",{type:"text",value:a,onChange:u=>i(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Link text"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:o?"Update Link":"Insert Link"})]})]})]})}):null},Ye=({isOpen:n,onClose:s,onInsert:c,initialData:o})=>{const[l,t]=g.useState(""),[a,i]=g.useState(""),d=g.useRef(null);g.useEffect(()=>{n&&o?(t(o.alt),i(o.src)):n&&!o&&(t(""),i(""))},[n,o]);const u=x=>{const A=x.target.files?.[0];if(A){const P=new FileReader;P.onload=h=>{const M=h.target?.result;c(M,l||A.name),t(""),i(""),s(),d.current&&(d.current.value="")},P.readAsDataURL(A)}},b=()=>{o&&a&&(c(a,l),t(""),i(""),s())},y=()=>{d.current&&d.current.click()};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:o?"Edit Image":"Insert Image"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx(q,{size:20})})]}),o&&e.jsxs("div",{className:"mb-4",children:[e.jsx("img",{src:a,alt:l,className:"max-w-full h-32 object-contain rounded border"}),e.jsx("button",{type:"button",onClick:y,className:"mt-2 px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Replace Image"})]}),e.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:u,className:"hidden"}),!o&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Image File"}),e.jsx("input",{type:"file",accept:"image/*",onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alt Text (optional)"}),e.jsx("input",{type:"text",value:l,onChange:x=>t(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Image description",autoFocus:!!o})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o&&e.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Image"})]})]})}):null},Je=({isOpen:n,onClose:s,onInsert:c,initialData:o})=>{const[l,t]=g.useState("");g.useEffect(()=>{n&&o?t(o.src):n&&!o&&t("")},[n,o]);const a=d=>{const u=d.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([\w-]+)/);if(u)return`https://www.youtube.com/embed/${u[1]}`;const b=d.match(/vimeo\.com\/(?:video\/)?(\d+)/);return b?`https://player.vimeo.com/video/${b[1]}`:d},i=d=>{if(d.preventDefault(),l.trim()){const u=a(l.trim());c(u),t(""),s()}};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:o?"Edit Video":"Insert Video"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx(q,{size:20})})]}),e.jsxs("form",{onSubmit:i,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video URL"}),e.jsx("input",{type:"url",value:l,onChange:d=>t(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"YouTube, Vimeo, or embed URL",required:!0,autoFocus:!0}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Supports YouTube, Vimeo, and direct embed URLs"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:o?"Update Video":"Insert Video"})]})]})]})}):null},We=()=>{const[n,s]=g.useState(!1),[c,o]=g.useState(!1),[l,t]=g.useState(!1),[a,i]=g.useState(null),d=()=>{ee();const y=ne();i(y?.type==="link"?y:null),s(!0)},u=()=>{ee();const y=ne();i(y?.type==="image"?y:null),o(!0)},b=()=>{ee();const y=ne();i(y?.type==="video"?y:null),t(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:d,className:"p-2 rounded transition-colors hover:bg-gray-200",title:"Insert Link",children:e.jsx(Se,{size:18})}),e.jsx("button",{onClick:u,className:"p-2 rounded transition-colors hover:bg-gray-200",title:"Insert Image",children:e.jsx(Le,{size:18})}),e.jsx("button",{onClick:b,className:"p-2 rounded transition-colors hover:bg-gray-200",title:"Insert Video",children:e.jsx(Pe,{size:18})})]}),e.jsx(Ue,{isOpen:n,onClose:()=>{s(!1),i(null)},onInsert:Fe,initialData:a?.type==="link"?{url:a.url,text:a.text}:null}),e.jsx(Ye,{isOpen:c,onClose:()=>{o(!1),i(null)},onInsert:Ve,initialData:a?.type==="image"?{src:a.src,alt:a.alt}:null}),e.jsx(Je,{isOpen:l,onClose:()=>{t(!1),i(null)},onInsert:De,initialData:a?.type==="video"?{src:a.src}:null})]})},Xe=({content:n="",onChange:s,onBlur:c,onFocus:o,config:l={showTextFormat:!0,showInlineFormat:!0,showAlignment:!0,showList:!0,showInsert:!0,showCodeView:!0}})=>{const t=g.useRef(null),[a,i]=g.useState({bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,bulletList:!1,numberedList:!1}),[d,u]=g.useState("p"),[b,y]=g.useState(!1),[x,A]=g.useState(!1),[P,h]=g.useState(n),M=f=>{const C=window.getSelection();if(!C||C.rangeCount===0)return;const E=C.getRangeAt(0);let _=E.commonAncestorContainer;_.nodeType===Node.TEXT_NODE&&(_=_.parentNode);let L=null,j=_;for(;j&&j!==t.current;){if(j.nodeType===Node.ELEMENT_NODE){const w=j,R=w.tagName.toLowerCase();if(["p","h1","h2","h3","h4","h5","h6","div"].includes(R)){L=w;break}}j=j.parentNode}if(L&&L!==t.current){const w=document.createElement(f);w.innerHTML=L.innerHTML,L.style.textAlign&&(w.style.textAlign=L.style.textAlign),L.parentNode?.replaceChild(w,L),u(f);const R=document.createRange();R.selectNodeContents(w),C.removeAllRanges(),C.addRange(R)}else{const w=document.createElement(f);if(E.toString())try{E.surroundContents(w)}catch{const S=E.extractContents();w.appendChild(S),E.insertNode(w)}else{w.innerHTML="<br>",E.insertNode(w);const R=document.createRange();R.setStart(w,0),R.collapse(!0),C.removeAllRanges(),C.addRange(R)}u(f)}setTimeout(()=>I(),10)},Q=()=>{if(t.current)if(x)t.current.innerHTML=P,t.current.contentEditable="true",A(!1);else{const f=t.current.innerHTML;h(f),t.current.contentEditable="false",t.current.textContent=f,A(!0)}},z=()=>{if(t.current&&s){const f=x?t.current.textContent||"":t.current.innerHTML;s(f)}},W=()=>{if(x&&t.current){const f=t.current.textContent||"";h(f),s&&s(f)}},X=()=>{if(c&&t.current){const f=t.current.textContent||"";c(f)}},B=()=>{o&&o()};g.useEffect(()=>{t.current&&n!==void 0&&(x?t.current.textContent=n:t.current.innerHTML=n,h(n))},[n,x]);const I=()=>{const f=window.getSelection();if(!f||f.rangeCount===0)return;let E=f.getRangeAt(0).commonAncestorContainer;E.nodeType===Node.TEXT_NODE&&(E=E.parentNode);let _=E,L="p";for(;_&&_!==t.current;){if(["H1","H2","H3","H4","H5","H6","P"].includes(_.tagName)){L=_.tagName.toLowerCase();break}_=_.parentElement}u(L);let j=E,w=!1,R=!1;for(;j&&j!==t.current;){if(j.tagName==="UL"){w=!0;break}else if(j.tagName==="OL"){R=!0;break}j=j.parentElement}const S=N=>{let T=E;for(;T&&T!==t.current;){if(T.nodeType===Node.ELEMENT_NODE&&T.tagName.toLowerCase()===N.toLowerCase())return!0;T=T.parentNode}return!1};let r=E;for(;r&&r!==t.current;){if(r.nodeType===Node.ELEMENT_NODE){const N=r.tagName.toLowerCase();if(["h1","h2","h3","h4","h5","h6","p"].includes(N)){u(N);break}}r=r.parentNode}(r===t.current||!r)&&u("p");let m=E;for(;m&&m!==t.current&&m.nodeType!==Node.ELEMENT_NODE;)m=m.parentNode;const p=m&&m.nodeType===Node.ELEMENT_NODE?m.style.textAlign:"";i({bold:S("strong")||S("b"),italic:S("em")||S("i"),underline:S("u"),strikethrough:S("s")||S("strike")||S("del"),alignLeft:p===""||p==="left",alignCenter:p==="center",alignRight:p==="right",alignJustify:p==="justify",bulletList:w,numberedList:R})},K=()=>{const f=window.getSelection();if(f&&f.rangeCount>0){const C=f.getRangeAt(0);t.current?.contains(C.commonAncestorContainer)&&I()}};g.useEffect(()=>(document.addEventListener("selectionchange",K),()=>{document.removeEventListener("selectionchange",K)}),[]);const F=f=>`p-2 rounded transition-colors ${f?"bg-blue-100 text-blue-600 hover:bg-blue-200":"text-gray-600 hover:bg-gray-100"}`,V=()=>e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),$=[{value:"p",label:"Paragraph",tag:"p"},{value:"h1",label:"Heading 1",tag:"h1"},{value:"h2",label:"Heading 2",tag:"h2"},{value:"h3",label:"Heading 3",tag:"h3"},{value:"h4",label:"Heading 4",tag:"h4"},{value:"h5",label:"Heading 5",tag:"h5"},{value:"h6",label:"Heading 6",tag:"h6"}];return e.jsxs("div",{className:"teddy-editor w-full min-h-screen bg-gray-100 flex flex-col items-center pb-8 relative",children:[!x&&e.jsx("div",{className:"sticky top-0 z-40 w-full bg-white border-b border-gray-200 shadow-sm px-4 py-2 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-1 max-w-5xl mx-auto w-full",children:[l.showTextFormat&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>y(!b),onBlur:()=>setTimeout(()=>y(!1),200),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded min-w-[130px] justify-between transition-colors",children:[e.jsx("span",{className:"font-medium",children:$.find(f=>f.value===d)?.label||"Paragraph"}),e.jsx(ue,{size:14,className:"text-gray-500"})]}),b&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 min-w-[160px] max-h-[300px] overflow-y-auto w-full",children:$.map(f=>e.jsx("button",{onMouseDown:C=>{C.preventDefault(),M(f.tag)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 ${d===f.value?"bg-blue-50 text-blue-600 font-medium":"text-gray-700"}`,children:f.label},f.value))})]}),e.jsx(V,{})]}),l.showInlineFormat&&e.jsxs(e.Fragment,{children:[e.jsx(me,{editorRef:t,activeFormats:{bold:a.bold,italic:a.italic,underline:a.underline,strikethrough:a.strikethrough},updateActiveFormats:I,getButtonClass:F}),e.jsx(V,{})]}),l.showAlignment&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{activeFormats:{alignLeft:a.alignLeft,alignCenter:a.alignCenter,alignRight:a.alignRight,alignJustify:a.alignJustify},updateActiveFormats:I,getButtonClass:F}),e.jsx(V,{})]}),l.showList&&e.jsxs(e.Fragment,{children:[e.jsx(he,{editorRef:t,activeFormats:{bulletList:a.bulletList,numberedList:a.numberedList},updateActiveFormats:I,getButtonClass:F}),e.jsx(V,{})]}),l.showInsert&&e.jsxs(e.Fragment,{children:[e.jsx(We,{}),e.jsx(V,{})]}),l.showCodeView&&e.jsx("button",{onClick:Q,className:F(x),title:x?"Switch to Visual View":"Switch to Code View",children:e.jsx(Te,{size:18})})]})}),!x&&e.jsx(ze,{editorRef:t,activeFormats:a,currentTextFormat:d,updateActiveFormats:I,applyTextFormat:M}),e.jsx("div",{ref:t,contentEditable:!x,className:`document-page outline-none focus:ring-0 ${x?"font-mono text-sm bg-gray-50 whitespace-pre-wrap !p-8":"prose prose-headings:mt-4 prose-headings:mb-2"}`,style:{whiteSpace:"pre-wrap",marginTop:"2rem",minHeight:"1000px"},onMouseUp:x?void 0:I,onKeyUp:x?void 0:I,onInput:x?W:z,onBlur:X,onFocus:B})]})};function Be(){return e.jsx(Xe,{content:"<p>Initial content</p>",onChange:n=>console.log("Content changed:",n),onBlur:n=>console.log("Editor lost focus",n),onFocus:()=>console.log("Editor gained focus")})}return Be});
