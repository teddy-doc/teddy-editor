(function(x,ge){typeof exports=="object"&&typeof module<"u"?module.exports=ge(require("react")):typeof define=="function"&&define.amd?define(["react"],ge):(x=typeof globalThis<"u"?globalThis:x||self,x.TeddyEditor=ge(x.React))})(this,function(x){"use strict";var ge={exports:{}},Se={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xt;function sn(){if(xt)return Se;xt=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(o,l,a){var c=null;if(a!==void 0&&(c=""+a),l.key!==void 0&&(c=""+l.key),"key"in l){a={};for(var d in l)d!=="key"&&(a[d]=l[d])}else a=l;return l=a.ref,{$$typeof:n,type:o,key:c,ref:l!==void 0?l:null,props:a}}return Se.Fragment=t,Se.jsx=s,Se.jsxs=s,Se}var ve={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tt;function ln(){return Tt||(Tt=1,process.env.NODE_ENV!=="production"&&function(){function n(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case ye:return"Profiler";case Z:return"StrictMode";case q:return"Suspense";case y:return"SuspenseList";case B:return"Activity"}if(typeof i=="object")switch(typeof i.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),i.$$typeof){case H:return"Portal";case re:return(i.displayName||"Context")+".Provider";case ce:return(i._context.displayName||"Context")+".Consumer";case C:var g=i.render;return i=i.displayName,i||(i=g.displayName||g.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case X:return g=i.displayName||null,g!==null?g:n(i.type)||"Memo";case j:g=i._payload,i=i._init;try{return n(i(g))}catch{}}return null}function t(i){return""+i}function s(i){try{t(i);var g=!1}catch{g=!0}if(g){g=console;var S=g.error,_=typeof Symbol=="function"&&Symbol.toStringTag&&i[Symbol.toStringTag]||i.constructor.name||"Object";return S.call(g,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",_),t(i)}}function o(i){if(i===w)return"<>";if(typeof i=="object"&&i!==null&&i.$$typeof===j)return"<...>";try{var g=n(i);return g?"<"+g+">":"<...>"}catch{return"<...>"}}function l(){var i=N.A;return i===null?null:i.getOwner()}function a(){return Error("react-stack-top-frame")}function c(i){if(v.call(i,"key")){var g=Object.getOwnPropertyDescriptor(i,"key").get;if(g&&g.isReactWarning)return!1}return i.key!==void 0}function d(i,g){function S(){K||(K=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",g))}S.isReactWarning=!0,Object.defineProperty(i,"key",{get:S,configurable:!0})}function p(){var i=n(this.type);return $[i]||($[i]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),i=this.props.ref,i!==void 0?i:null}function f(i,g,S,_,ne,A,ue,he){return S=A.ref,i={$$typeof:R,type:i,key:g,props:A,_owner:ne},(S!==void 0?S:null)!==null?Object.defineProperty(i,"ref",{enumerable:!1,get:p}):Object.defineProperty(i,"ref",{enumerable:!1,value:null}),i._store={},Object.defineProperty(i._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(i,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(i,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ue}),Object.defineProperty(i,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:he}),Object.freeze&&(Object.freeze(i.props),Object.freeze(i)),i}function b(i,g,S,_,ne,A,ue,he){var k=g.children;if(k!==void 0)if(_)if(D(k)){for(_=0;_<k.length;_++)E(k[_]);Object.freeze&&Object.freeze(k)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else E(k);if(v.call(g,"key")){k=n(i);var de=Object.keys(g).filter(function(We){return We!=="key"});_=0<de.length?"{key: someKey, "+de.join(": ..., ")+": ...}":"{key: someKey}",te[k+_]||(de=0<de.length?"{"+de.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,_,k,de,k),te[k+_]=!0)}if(k=null,S!==void 0&&(s(S),k=""+S),c(g)&&(s(g.key),k=""+g.key),"key"in g){S={};for(var be in g)be!=="key"&&(S[be]=g[be])}else S=g;return k&&d(S,typeof i=="function"?i.displayName||i.name||"Unknown":i),f(i,k,A,ne,l(),S,ue,he)}function E(i){typeof i=="object"&&i!==null&&i.$$typeof===R&&i._store&&(i._store.validated=1)}var O=x,R=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),re=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),V=Symbol.for("react.client.reference"),N=O.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,v=Object.prototype.hasOwnProperty,D=Array.isArray,P=console.createTask?console.createTask:function(){return null};O={"react-stack-bottom-frame":function(i){return i()}};var K,$={},ae=O["react-stack-bottom-frame"].bind(O,a)(),se=P(o(a)),te={};ve.Fragment=w,ve.jsx=function(i,g,S,_,ne){var A=1e4>N.recentlyCreatedOwnerStacks++;return b(i,g,S,!1,_,ne,A?Error("react-stack-top-frame"):ae,A?P(o(i)):se)},ve.jsxs=function(i,g,S,_,ne){var A=1e4>N.recentlyCreatedOwnerStacks++;return b(i,g,S,!0,_,ne,A?Error("react-stack-top-frame"):ae,A?P(o(i)):se)}}()),ve}var yt;function cn(){return yt||(yt=1,process.env.NODE_ENV==="production"?ge.exports=sn():ge.exports=ln()),ge.exports}var r=cn();/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dn=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,o)=>o?o.toUpperCase():s.toLowerCase()),_t=n=>{const t=dn(n);return t.charAt(0).toUpperCase()+t.slice(1)},Nt=(...n)=>n.filter((t,s,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===s).join(" ").trim(),mn=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=x.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:a,iconNode:c,...d},p)=>x.createElement("svg",{ref:p,...fn,width:t,height:t,stroke:n,strokeWidth:o?Number(s)*24/Number(t):s,className:Nt("lucide",l),...!a&&!mn(d)&&{"aria-hidden":"true"},...d},[...c.map(([f,b])=>x.createElement(f,b)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=(n,t)=>{const s=x.forwardRef(({className:o,...l},a)=>x.createElement(pn,{ref:a,iconNode:t,className:Nt(`lucide-${un(_t(n))}`,`lucide-${n}`,o),...l}));return s.displayName=_t(n),s};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=F("align-center",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=F("align-justify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=F("align-left",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=F("align-right",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=F("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=F("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=F("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=F("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=F("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=F("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=F("list-ordered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=F("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=F("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=F("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=F("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=F("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Pe=(n,t,s)=>{const o=window.getSelection();if(!o||o.rangeCount===0||!t.current)return;const l=o.getRangeAt(0);if(l.toString())try{const a=()=>{let f=l.commonAncestorContainer;for(;f&&f!==t.current;){if(f.nodeType===Node.ELEMENT_NODE){const b=f;if(b.tagName.toLowerCase()===n.toLowerCase())return{isFormatted:!0,formatElement:b}}f=f.parentNode}return{isFormatted:!1,formatElement:null}},{isFormatted:c,formatElement:d}=a();let p=null;if(c&&d){const f=d.parentNode,b=document.createTextNode(d.textContent||"");f?.replaceChild(b,d),f?.normalize();const E=document.createRange();E.selectNodeContents(b),o.removeAllRanges(),o.addRange(E)}else{p=document.createElement(n);try{l.surroundContents(p);const f=document.createRange();f.selectNodeContents(p),o.removeAllRanges(),o.addRange(f)}catch{const b=l.extractContents();p.appendChild(b),l.insertNode(p);const E=document.createRange();E.selectNodeContents(p),o.removeAllRanges(),o.addRange(E)}}s()}catch(a){console.warn("Error applying format:",a),s()}},wt=({editorRef:n,activeFormats:t,updateActiveFormats:s,getButtonClass:o})=>r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>Pe("strong",n,s),className:o(t.bold),title:"Bold",children:r.jsx(xn,{size:18})}),r.jsx("button",{onClick:()=>Pe("em",n,s),className:o(t.italic),title:"Italic",children:r.jsx(_n,{size:18})}),r.jsx("button",{onClick:()=>Pe("u",n,s),className:o(t.underline),title:"Underline",children:r.jsx(Cn,{size:18})}),r.jsx("button",{onClick:()=>Pe("s",n,s),className:o(t.strikethrough),title:"Strikethrough",children:r.jsx(Rn,{size:18})})]}),He=(n,t)=>{const s=window.getSelection();if(!s||s.rangeCount===0)return;let l=s.getRangeAt(0).commonAncestorContainer;for(;l&&l.nodeType!==Node.ELEMENT_NODE;)l=l.parentNode;if(l&&l.nodeType===Node.ELEMENT_NODE){const a=l;a.style.textAlign=n==="left"?"":n,t()}},Rt=({activeFormats:n,updateActiveFormats:t,getButtonClass:s})=>r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>He("left",t),className:s(n.alignLeft),title:"Align Left",children:r.jsx(bn,{size:18})}),r.jsx("button",{onClick:()=>He("center",t),className:s(n.alignCenter),title:"Align Center",children:r.jsx(gn,{size:18})}),r.jsx("button",{onClick:()=>He("right",t),className:s(n.alignRight),title:"Align Right",children:r.jsx(En,{size:18})}),r.jsx("button",{onClick:()=>He("justify",t),className:s(n.alignJustify),title:"Justify",children:r.jsx(hn,{size:18})})]}),Ct=(n,t,s)=>{const o=window.getSelection();if(!o||o.rangeCount===0||!t.current)return;const l=o.getRangeAt(0);let a=l.commonAncestorContainer;a.nodeType===Node.TEXT_NODE&&(a=a.parentNode);let c=a;for(;c&&c!==t.current&&!["P","H1","H2","H3","H4","H5","H6","LI","UL","OL"].includes(c.tagName);)c=c.parentElement;if(!c||c===t.current){const d=document.createElement(n),p=document.createElement("li");p.textContent=o.toString()||"List item",d.appendChild(p),l.deleteContents(),l.insertNode(d);const f=document.createRange();f.setStart(p,0),f.setEnd(p,p.childNodes.length),o.removeAllRanges(),o.addRange(f)}else if(c.tagName==="LI"){const d=c.parentElement;if(d.tagName.toLowerCase()===n){const p=document.createElement("p");p.innerHTML=c.innerHTML,d.parentNode?.replaceChild(p,d)}else{const p=document.createElement(n);p.innerHTML=d.innerHTML,d.parentNode?.replaceChild(p,d)}}else{const d=document.createElement(n),p=document.createElement("li");p.innerHTML=c.innerHTML,d.appendChild(p),c.parentNode?.replaceChild(d,c)}s()},St=({editorRef:n,activeFormats:t,updateActiveFormats:s,getButtonClass:o})=>r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>{n?.current&&Ct("ul",n,s)},className:o(t.bulletList),title:"Bullet List",children:r.jsx(wn,{size:18})}),r.jsx("button",{onClick:()=>{n?.current&&Ct("ol",n,s)},className:o(t.numberedList),title:"Numbered List",children:r.jsx(An,{size:18})})]}),vn=({editorRef:n,activeFormats:t,currentTextFormat:s,updateActiveFormats:o,applyTextFormat:l})=>{const[a,c]=x.useState({top:0,left:0}),[d,p]=x.useState(!1),[f,b]=x.useState(!1),E=x.useRef(null),O=[{value:"p",label:"Paragraph",tag:"p"},{value:"h1",label:"Heading 1",tag:"h1"},{value:"h2",label:"Heading 2",tag:"h2"},{value:"h3",label:"Heading 3",tag:"h3"},{value:"h4",label:"Heading 4",tag:"h4"},{value:"h5",label:"Heading 5",tag:"h5"},{value:"h6",label:"Heading 6",tag:"h6"}];x.useEffect(()=>{const w=()=>{const Z=window.getSelection();if(!Z||Z.rangeCount===0||Z.isCollapsed||!n.current||!n.current.contains(Z.anchorNode)){p(!1),b(!1);return}const ce=Z.getRangeAt(0).getBoundingClientRect(),re=E.current?.offsetHeight||50,C=ce.top-re-45,q=ce.left+ce.width/2;c({top:C,left:q}),p(!0)};return document.addEventListener("selectionchange",w),window.addEventListener("scroll",w,!0),window.addEventListener("resize",w),()=>{document.removeEventListener("selectionchange",w),window.removeEventListener("scroll",w,!0),window.removeEventListener("resize",w)}},[n]);const R=w=>`p-1.5 rounded transition-colors ${w?"bg-blue-100 text-blue-600 hover:bg-blue-200":"text-gray-600 hover:bg-gray-100"}`,H=w=>{l(w),b(!1)};return d?r.jsxs("div",{ref:E,className:"fixed z-50 flex items-center gap-1 p-1 bg-white rounded-lg shadow-lg border border-gray-200 animate-in fade-in zoom-in-95 duration-200",style:{top:`${a.top}px`,left:`${a.left}px`,transform:"translateX(-50%)"},onMouseDown:w=>{w.preventDefault()},children:[r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>b(!f),className:"flex items-center gap-1 px-2 py-1.5 text-sm text-gray-700 hover:bg-gray-100 rounded min-w-[100px] justify-between",children:[r.jsx("span",{className:"truncate max-w-[80px]",children:O.find(w=>w.value===s)?.label||"Paragraph"}),r.jsx(At,{size:12})]}),f&&r.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-xl overflow-hidden min-w-[140px] max-h-[300px] overflow-y-auto",children:O.map(w=>r.jsx("button",{onClick:()=>H(w.tag),className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${s===w.value?"bg-blue-50 text-blue-600":"text-gray-700"}`,children:w.label},w.value))})]}),r.jsx("div",{className:"w-px h-5 bg-gray-200 mx-1"}),r.jsx(wt,{editorRef:n,activeFormats:t,updateActiveFormats:o,getButtonClass:R}),r.jsx("div",{className:"w-px h-5 bg-gray-200 mx-1"}),r.jsx(St,{editorRef:n,activeFormats:{bulletList:t.bulletList,numberedList:t.numberedList},updateActiveFormats:o,getButtonClass:R}),r.jsx("div",{className:"w-px h-5 bg-gray-200 mx-1"}),r.jsx(Rt,{activeFormats:{alignLeft:t.alignLeft,alignCenter:t.alignCenter,alignRight:t.alignRight,alignJustify:t.alignJustify},updateActiveFormats:o,getButtonClass:R})]}):null};let Te=null;const $e=()=>{const n=window.getSelection();n&&n.rangeCount>0&&(Te=n.getRangeAt(0).cloneRange())},Qe=()=>{if(Te){const n=window.getSelection();n?.removeAllRanges(),n?.addRange(Te)}},qe=()=>{const n=window.getSelection();if(!n||n.rangeCount===0)return null;let s=n.getRangeAt(0).commonAncestorContainer;s.nodeType===Node.TEXT_NODE&&(s=s.parentNode);let o=s;for(;o&&o!==document.body;){if(o.nodeType===Node.ELEMENT_NODE){const l=o,a=l.tagName.toLowerCase();if(a==="a")return{type:"link",url:l.getAttribute("href")||"",text:l.textContent||""};if(a==="img")return{type:"image",src:l.getAttribute("src")||"",alt:l.getAttribute("alt")||""};if(a==="iframe")return{type:"video",src:l.getAttribute("src")||""}}o=o.parentNode}return null},Ln=(n,t)=>{Qe();const s=window.getSelection();if(!s||s.rangeCount===0){const c=document.querySelector('[contenteditable="true"]');if(c){const d=document.createElement("a");d.href=n,d.textContent=t||n,d.target="_blank",d.rel="noopener noreferrer",d.className="text-blue-600 underline hover:text-blue-800",c.appendChild(d);const p=document.createTextNode(" ");c.appendChild(p);const f=document.createRange();f.setStartAfter(p),f.collapse(!0),s&&(s.removeAllRanges(),s.addRange(f))}return}const o=s.getRangeAt(0);let l=null,a=o.commonAncestorContainer;for(;a&&a!==document.body;){if(a.nodeType===Node.ELEMENT_NODE&&a.tagName.toLowerCase()==="a"){l=a;break}a=a.parentNode}if(l)l.setAttribute("href",n),l.textContent=t||n;else{const c=document.createElement("a");c.href=n,c.textContent=t||n,c.target="_blank",c.rel="noopener noreferrer",c.className="text-blue-600 underline hover:text-blue-800",o.deleteContents(),o.insertNode(c);const d=document.createRange();d.setStartAfter(c),d.collapse(!0),s.removeAllRanges(),s.addRange(d)}Te=null},kn=(n,t="Inserted image")=>{Qe();const s=window.getSelection();if(!s||s.rangeCount===0){const c=document.querySelector('[contenteditable="true"]');if(c){const d=document.createElement("img");d.src=n,d.alt=t,d.className="max-w-full h-auto rounded shadow-sm",c.appendChild(d);const p=document.createElement("br");c.appendChild(p);const f=document.createRange();f.setStartAfter(p),f.collapse(!0),s&&(s.removeAllRanges(),s.addRange(f))}return}const o=s.getRangeAt(0);let l=null,a=o.commonAncestorContainer;for(;a&&a!==document.body;){if(a.nodeType===Node.ELEMENT_NODE&&a.tagName.toLowerCase()==="img"){l=a;break}a=a.parentNode}if(l)l.setAttribute("src",n),l.setAttribute("alt",t);else{const c=document.createElement("img");c.src=n,c.alt=t,c.className="max-w-full h-auto rounded shadow-sm",o.deleteContents(),o.insertNode(c);const d=document.createRange();d.setStartAfter(c),d.collapse(!0),s.removeAllRanges(),s.addRange(d)}Te=null},On=n=>{Qe();const t=window.getSelection();if(!t||t.rangeCount===0){const a=document.querySelector('[contenteditable="true"]');if(a){const c=document.createElement("iframe");c.src=n,c.width="560",c.height="315",c.className="max-w-full rounded shadow-sm",c.setAttribute("frameborder","0"),c.setAttribute("allowfullscreen","true"),c.setAttribute("sandbox","allow-scripts allow-same-origin allow-presentation"),a.appendChild(c);const d=document.createElement("br");a.appendChild(d);const p=document.createRange();p.setStartAfter(d),p.collapse(!0),t&&(t.removeAllRanges(),t.addRange(p))}return}const s=t.getRangeAt(0);let o=null,l=s.commonAncestorContainer;for(;l&&l!==document.body;){if(l.nodeType===Node.ELEMENT_NODE&&l.tagName.toLowerCase()==="iframe"){o=l;break}l=l.parentNode}if(o)o.setAttribute("src",n);else{const a=document.createElement("iframe");a.src=n,a.width="560",a.height="315",a.className="max-w-full rounded shadow-sm",a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen","true"),a.setAttribute("sandbox","allow-scripts allow-same-origin allow-presentation"),s.deleteContents(),s.insertNode(a);const c=document.createRange();c.setStartAfter(a),c.collapse(!0),t.removeAllRanges(),t.addRange(c)}Te=null},jn=({isOpen:n,onClose:t,onInsert:s,initialData:o})=>{const[l,a]=x.useState(""),[c,d]=x.useState("");x.useEffect(()=>{n&&o?(a(o.url),d(o.text)):n&&!o&&(a(""),d(""))},[n,o]);const p=f=>{f.preventDefault(),l.trim()&&(s(l.trim(),c.trim()),a(""),d(""),t())};return n?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:o?"Edit Link":"Insert Link"}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:r.jsx(Ke,{size:20})})]}),r.jsxs("form",{onSubmit:p,children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL"}),r.jsx("input",{type:"url",value:l,onChange:f=>a(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com",required:!0,autoFocus:!0})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link Text (optional)"}),r.jsx("input",{type:"text",value:c,onChange:f=>d(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Link text"})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:o?"Update Link":"Insert Link"})]})]})]})}):null},Mn=({isOpen:n,onClose:t,onInsert:s,initialData:o})=>{const[l,a]=x.useState(""),[c,d]=x.useState(""),p=x.useRef(null);x.useEffect(()=>{n&&o?(a(o.alt),d(o.src)):n&&!o&&(a(""),d(""))},[n,o]);const f=O=>{const R=O.target.files?.[0];if(R){const H=new FileReader;H.onload=w=>{const Z=w.target?.result;s(Z,l||R.name),a(""),d(""),t(),p.current&&(p.current.value="")},H.readAsDataURL(R)}},b=()=>{o&&c&&(s(c,l),a(""),d(""),t())},E=()=>{p.current&&p.current.click()};return n?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:o?"Edit Image":"Insert Image"}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:r.jsx(Ke,{size:20})})]}),o&&r.jsxs("div",{className:"mb-4",children:[r.jsx("img",{src:c,alt:l,className:"max-w-full h-32 object-contain rounded border"}),r.jsx("button",{type:"button",onClick:E,className:"mt-2 px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Replace Image"})]}),r.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:f,className:"hidden"}),!o&&r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Image File"}),r.jsx("input",{type:"file",accept:"image/*",onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alt Text (optional)"}),r.jsx("input",{type:"text",value:l,onChange:O=>a(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Image description",autoFocus:!!o})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o&&r.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Image"})]})]})}):null},In=({isOpen:n,onClose:t,onInsert:s,initialData:o})=>{const[l,a]=x.useState(""),[c,d]=x.useState("");x.useEffect(()=>{n&&o?a(o.src):n&&!o&&a(""),d("")},[n,o]);const p=b=>{const E=b.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([\w-]+)/);if(E)return`https://www.youtube.com/embed/${E[1]}`;const O=b.match(/vimeo\.com\/(?:video\/)?(\d+)/);return O?`https://player.vimeo.com/video/${O[1]}`:b.includes("youtube.com/embed/")||b.includes("player.vimeo.com/video/")?b:null},f=b=>{if(b.preventDefault(),d(""),l.trim()){const E=p(l.trim());E?(s(E),a(""),t()):d("Invalid URL. Only YouTube and Vimeo are supported for security.")}};return n?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:o?"Edit Video":"Insert Video"}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:r.jsx(Ke,{size:20})})]}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video URL"}),r.jsx("input",{type:"url",value:l,onChange:b=>a(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"YouTube, Vimeo, or embed URL",required:!0,autoFocus:!0}),c&&r.jsx("p",{className:"text-sm text-red-500 mt-1",children:c}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Supports YouTube, Vimeo, and direct embed URLs"})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:o?"Update Video":"Insert Video"})]})]})]})}):null},Dn=()=>{const[n,t]=x.useState(!1),[s,o]=x.useState(!1),[l,a]=x.useState(!1),[c,d]=x.useState(null),p=()=>{$e();const E=qe();d(E?.type==="link"?E:null),t(!0)},f=()=>{$e();const E=qe();d(E?.type==="image"?E:null),o(!0)},b=()=>{$e();const E=qe();d(E?.type==="video"?E:null),a(!0)};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:p,className:"p-2 rounded transition-colors hover:bg-gray-200",title:"Insert Link",children:r.jsx(Nn,{size:18})}),r.jsx("button",{onClick:f,className:"p-2 rounded transition-colors hover:bg-gray-200",title:"Insert Image",children:r.jsx(yn,{size:18})}),r.jsx("button",{onClick:b,className:"p-2 rounded transition-colors hover:bg-gray-200",title:"Insert Video",children:r.jsx(Sn,{size:18})})]}),r.jsx(jn,{isOpen:n,onClose:()=>{t(!1),d(null)},onInsert:Ln,initialData:c?.type==="link"?{url:c.url,text:c.text}:null}),r.jsx(Mn,{isOpen:s,onClose:()=>{o(!1),d(null)},onInsert:kn,initialData:c?.type==="image"?{src:c.src,alt:c.alt}:null}),r.jsx(In,{isOpen:l,onClose:()=>{a(!1),d(null)},onInsert:On,initialData:c?.type==="video"?{src:c.src}:null})]})},Pn=({config:n,activeFormats:t,currentTextFormat:s,updateActiveFormats:o,applyTextFormat:l,toggleCodeView:a,isCodeView:c,editorRef:d})=>{const[p,f]=x.useState(!1),b=R=>`p-2 rounded transition-colors ${R?"bg-blue-100 text-blue-600 hover:bg-blue-200":"text-gray-600 hover:bg-gray-100"}`,E=()=>r.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),O=[{value:"p",label:"Paragraph",tag:"p"},{value:"h1",label:"Heading 1",tag:"h1"},{value:"h2",label:"Heading 2",tag:"h2"},{value:"h3",label:"Heading 3",tag:"h3"},{value:"h4",label:"Heading 4",tag:"h4"},{value:"h5",label:"Heading 5",tag:"h5"},{value:"h6",label:"Heading 6",tag:"h6"}];return r.jsx("div",{className:"sticky top-0 z-40 w-full bg-white border-b border-gray-200 shadow-sm px-4 py-2 flex items-center justify-center",children:r.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-1 max-w-5xl mx-auto w-full",children:[n.showTextFormat&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>f(!p),onBlur:()=>setTimeout(()=>f(!1),200),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded min-w-[130px] justify-between transition-colors",children:[r.jsx("span",{className:"font-medium",children:O.find(R=>R.value===s)?.label||"Paragraph"}),r.jsx(At,{size:14,className:"text-gray-500"})]}),p&&r.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 min-w-[160px] max-h-[300px] overflow-y-auto w-full",children:O.map(R=>r.jsx("button",{onMouseDown:H=>{H.preventDefault(),l(R.tag)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 ${s===R.value?"bg-blue-50 text-blue-600 font-medium":"text-gray-700"}`,children:R.label},R.value))})]}),r.jsx(E,{})]}),n.showInlineFormat&&r.jsxs(r.Fragment,{children:[r.jsx(wt,{editorRef:d,activeFormats:{bold:t.bold,italic:t.italic,underline:t.underline,strikethrough:t.strikethrough},updateActiveFormats:o,getButtonClass:b}),r.jsx(E,{})]}),n.showAlignment&&r.jsxs(r.Fragment,{children:[r.jsx(Rt,{activeFormats:{alignLeft:t.alignLeft,alignCenter:t.alignCenter,alignRight:t.alignRight,alignJustify:t.alignJustify},updateActiveFormats:o,getButtonClass:b}),r.jsx(E,{})]}),n.showList&&r.jsxs(r.Fragment,{children:[r.jsx(St,{editorRef:d,activeFormats:{bulletList:t.bulletList,numberedList:t.numberedList},updateActiveFormats:o,getButtonClass:b}),r.jsx(E,{})]}),n.showInsert&&r.jsxs(r.Fragment,{children:[r.jsx(Dn,{}),r.jsx(E,{})]}),n.showCodeView&&r.jsx("button",{onClick:a,className:b(c),title:c?"Switch to Visual View":"Switch to Code View",children:r.jsx(Tn,{size:18})})]})})};/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:vt,setPrototypeOf:Lt,isFrozen:Hn,getPrototypeOf:Un,getOwnPropertyDescriptor:Fn}=Object;let{freeze:W,seal:Q,create:et}=Object,{apply:tt,construct:nt}=typeof Reflect<"u"&&Reflect;W||(W=function(t){return t}),Q||(Q=function(t){return t}),tt||(tt=function(t,s){for(var o=arguments.length,l=new Array(o>2?o-2:0),a=2;a<o;a++)l[a-2]=arguments[a];return t.apply(s,l)}),nt||(nt=function(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return new t(...o)});const Ue=Y(Array.prototype.forEach),zn=Y(Array.prototype.lastIndexOf),kt=Y(Array.prototype.pop),Le=Y(Array.prototype.push),Wn=Y(Array.prototype.splice),Fe=Y(String.prototype.toLowerCase),ot=Y(String.prototype.toString),rt=Y(String.prototype.match),ke=Y(String.prototype.replace),Gn=Y(String.prototype.indexOf),Yn=Y(String.prototype.trim),ee=Y(Object.prototype.hasOwnProperty),G=Y(RegExp.prototype.test),Oe=Bn(TypeError);function Y(n){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return tt(n,t,o)}}function Bn(n){return function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return nt(n,s)}}function T(n,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fe;Lt&&Lt(n,null);let o=t.length;for(;o--;){let l=t[o];if(typeof l=="string"){const a=s(l);a!==l&&(Hn(t)||(t[o]=a),l=a)}n[l]=!0}return n}function Vn(n){for(let t=0;t<n.length;t++)ee(n,t)||(n[t]=null);return n}function oe(n){const t=et(null);for(const[s,o]of vt(n))ee(n,s)&&(Array.isArray(o)?t[s]=Vn(o):o&&typeof o=="object"&&o.constructor===Object?t[s]=oe(o):t[s]=o);return t}function je(n,t){for(;n!==null;){const o=Fn(n,t);if(o){if(o.get)return Y(o.get);if(typeof o.value=="function")return Y(o.value)}n=Un(n)}function s(){return null}return s}const Ot=W(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),at=W(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),st=W(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Xn=W(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),lt=W(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Jn=W(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),jt=W(["#text"]),Mt=W(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),it=W(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),It=W(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ze=W(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Zn=Q(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Kn=Q(/<%[\w\W]*|[\w\W]*%>/gm),$n=Q(/\$\{[\w\W]*/gm),Qn=Q(/^data-[\-\w.\u00B7-\uFFFF]+$/),qn=Q(/^aria-[\-\w]+$/),Dt=Q(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),eo=Q(/^(?:\w+script|data):/i),to=Q(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Pt=Q(/^html$/i),no=Q(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ht=Object.freeze({__proto__:null,ARIA_ATTR:qn,ATTR_WHITESPACE:to,CUSTOM_ELEMENT:no,DATA_ATTR:Qn,DOCTYPE_NAME:Pt,ERB_EXPR:Kn,IS_ALLOWED_URI:Dt,IS_SCRIPT_OR_DATA:eo,MUSTACHE_EXPR:Zn,TMPLIT_EXPR:$n});const Me={element:1,text:3,progressingInstruction:7,comment:8,document:9},oo=function(){return typeof window>"u"?null:window},ro=function(t,s){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let o=null;const l="data-tt-policy-suffix";s&&s.hasAttribute(l)&&(o=s.getAttribute(l));const a="dompurify"+(o?"#"+o:"");try{return t.createPolicy(a,{createHTML(c){return c},createScriptURL(c){return c}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Ut=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ft(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oo();const t=h=>Ft(h);if(t.version="3.3.1",t.removed=[],!n||!n.document||n.document.nodeType!==Me.document||!n.Element)return t.isSupported=!1,t;let{document:s}=n;const o=s,l=o.currentScript,{DocumentFragment:a,HTMLTemplateElement:c,Node:d,Element:p,NodeFilter:f,NamedNodeMap:b=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:E,DOMParser:O,trustedTypes:R}=n,H=p.prototype,w=je(H,"cloneNode"),Z=je(H,"remove"),ye=je(H,"nextSibling"),ce=je(H,"childNodes"),re=je(H,"parentNode");if(typeof c=="function"){const h=s.createElement("template");h.content&&h.content.ownerDocument&&(s=h.content.ownerDocument)}let C,q="";const{implementation:y,createNodeIterator:X,createDocumentFragment:j,getElementsByTagName:B}=s,{importNode:V}=o;let N=Ut();t.isSupported=typeof vt=="function"&&typeof re=="function"&&y&&y.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:v,ERB_EXPR:D,TMPLIT_EXPR:P,DATA_ATTR:K,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:ae,ATTR_WHITESPACE:se,CUSTOM_ELEMENT:te}=Ht;let{IS_ALLOWED_URI:i}=Ht,g=null;const S=T({},[...Ot,...at,...st,...lt,...jt]);let _=null;const ne=T({},[...Mt,...it,...It,...ze]);let A=Object.seal(et(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ue=null,he=null;const k=Object.seal(et(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let de=!0,be=!0,We=!1,Wt=!0,_e=!1,Ge=!0,Ee=!1,ct=!1,ut=!1,Ne=!1,Ye=!1,Be=!1,Gt=!0,Yt=!1;const lo="user-content-";let dt=!0,Ie=!1,Ae={},le=null;const mt=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Bt=null;const Vt=T({},["audio","video","img","source","image","track"]);let ft=null;const Xt=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ve="http://www.w3.org/1998/Math/MathML",Xe="http://www.w3.org/2000/svg",me="http://www.w3.org/1999/xhtml";let we=me,pt=!1,gt=null;const io=T({},[Ve,Xe,me],ot);let Je=T({},["mi","mo","mn","ms","mtext"]),Ze=T({},["annotation-xml"]);const co=T({},["title","style","font","a","script"]);let De=null;const uo=["application/xhtml+xml","text/html"],mo="text/html";let I=null,Re=null;const fo=s.createElement("form"),Jt=function(e){return e instanceof RegExp||e instanceof Function},ht=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Re&&Re===e)){if((!e||typeof e!="object")&&(e={}),e=oe(e),De=uo.indexOf(e.PARSER_MEDIA_TYPE)===-1?mo:e.PARSER_MEDIA_TYPE,I=De==="application/xhtml+xml"?ot:Fe,g=ee(e,"ALLOWED_TAGS")?T({},e.ALLOWED_TAGS,I):S,_=ee(e,"ALLOWED_ATTR")?T({},e.ALLOWED_ATTR,I):ne,gt=ee(e,"ALLOWED_NAMESPACES")?T({},e.ALLOWED_NAMESPACES,ot):io,ft=ee(e,"ADD_URI_SAFE_ATTR")?T(oe(Xt),e.ADD_URI_SAFE_ATTR,I):Xt,Bt=ee(e,"ADD_DATA_URI_TAGS")?T(oe(Vt),e.ADD_DATA_URI_TAGS,I):Vt,le=ee(e,"FORBID_CONTENTS")?T({},e.FORBID_CONTENTS,I):mt,ue=ee(e,"FORBID_TAGS")?T({},e.FORBID_TAGS,I):oe({}),he=ee(e,"FORBID_ATTR")?T({},e.FORBID_ATTR,I):oe({}),Ae=ee(e,"USE_PROFILES")?e.USE_PROFILES:!1,de=e.ALLOW_ARIA_ATTR!==!1,be=e.ALLOW_DATA_ATTR!==!1,We=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Wt=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,_e=e.SAFE_FOR_TEMPLATES||!1,Ge=e.SAFE_FOR_XML!==!1,Ee=e.WHOLE_DOCUMENT||!1,Ne=e.RETURN_DOM||!1,Ye=e.RETURN_DOM_FRAGMENT||!1,Be=e.RETURN_TRUSTED_TYPE||!1,ut=e.FORCE_BODY||!1,Gt=e.SANITIZE_DOM!==!1,Yt=e.SANITIZE_NAMED_PROPS||!1,dt=e.KEEP_CONTENT!==!1,Ie=e.IN_PLACE||!1,i=e.ALLOWED_URI_REGEXP||Dt,we=e.NAMESPACE||me,Je=e.MATHML_TEXT_INTEGRATION_POINTS||Je,Ze=e.HTML_INTEGRATION_POINTS||Ze,A=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Jt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(A.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Jt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(A.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(A.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_e&&(be=!1),Ye&&(Ne=!0),Ae&&(g=T({},jt),_=[],Ae.html===!0&&(T(g,Ot),T(_,Mt)),Ae.svg===!0&&(T(g,at),T(_,it),T(_,ze)),Ae.svgFilters===!0&&(T(g,st),T(_,it),T(_,ze)),Ae.mathMl===!0&&(T(g,lt),T(_,It),T(_,ze))),e.ADD_TAGS&&(typeof e.ADD_TAGS=="function"?k.tagCheck=e.ADD_TAGS:(g===S&&(g=oe(g)),T(g,e.ADD_TAGS,I))),e.ADD_ATTR&&(typeof e.ADD_ATTR=="function"?k.attributeCheck=e.ADD_ATTR:(_===ne&&(_=oe(_)),T(_,e.ADD_ATTR,I))),e.ADD_URI_SAFE_ATTR&&T(ft,e.ADD_URI_SAFE_ATTR,I),e.FORBID_CONTENTS&&(le===mt&&(le=oe(le)),T(le,e.FORBID_CONTENTS,I)),e.ADD_FORBID_CONTENTS&&(le===mt&&(le=oe(le)),T(le,e.ADD_FORBID_CONTENTS,I)),dt&&(g["#text"]=!0),Ee&&T(g,["html","head","body"]),g.table&&(T(g,["tbody"]),delete ue.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw Oe('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Oe('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=e.TRUSTED_TYPES_POLICY,q=C.createHTML("")}else C===void 0&&(C=ro(R,l)),C!==null&&typeof q=="string"&&(q=C.createHTML(""));W&&W(e),Re=e}},Zt=T({},[...at,...st,...Xn]),Kt=T({},[...lt,...Jn]),po=function(e){let u=re(e);(!u||!u.tagName)&&(u={namespaceURI:we,tagName:"template"});const m=Fe(e.tagName),L=Fe(u.tagName);return gt[e.namespaceURI]?e.namespaceURI===Xe?u.namespaceURI===me?m==="svg":u.namespaceURI===Ve?m==="svg"&&(L==="annotation-xml"||Je[L]):!!Zt[m]:e.namespaceURI===Ve?u.namespaceURI===me?m==="math":u.namespaceURI===Xe?m==="math"&&Ze[L]:!!Kt[m]:e.namespaceURI===me?u.namespaceURI===Xe&&!Ze[L]||u.namespaceURI===Ve&&!Je[L]?!1:!Kt[m]&&(co[m]||!Zt[m]):!!(De==="application/xhtml+xml"&&gt[e.namespaceURI]):!1},ie=function(e){Le(t.removed,{element:e});try{re(e).removeChild(e)}catch{Z(e)}},xe=function(e,u){try{Le(t.removed,{attribute:u.getAttributeNode(e),from:u})}catch{Le(t.removed,{attribute:null,from:u})}if(u.removeAttribute(e),e==="is")if(Ne||Ye)try{ie(u)}catch{}else try{u.setAttribute(e,"")}catch{}},$t=function(e){let u=null,m=null;if(ut)e="<remove></remove>"+e;else{const M=rt(e,/^[\r\n\t ]+/);m=M&&M[0]}De==="application/xhtml+xml"&&we===me&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const L=C?C.createHTML(e):e;if(we===me)try{u=new O().parseFromString(L,De)}catch{}if(!u||!u.documentElement){u=y.createDocument(we,"template",null);try{u.documentElement.innerHTML=pt?q:L}catch{}}const z=u.body||u.documentElement;return e&&m&&z.insertBefore(s.createTextNode(m),z.childNodes[0]||null),we===me?B.call(u,Ee?"html":"body")[0]:Ee?u.documentElement:z},Qt=function(e){return X.call(e.ownerDocument||e,e,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null)},bt=function(e){return e instanceof E&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof b)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},qt=function(e){return typeof d=="function"&&e instanceof d};function fe(h,e,u){Ue(h,m=>{m.call(t,e,u,Re)})}const en=function(e){let u=null;if(fe(N.beforeSanitizeElements,e,null),bt(e))return ie(e),!0;const m=I(e.nodeName);if(fe(N.uponSanitizeElement,e,{tagName:m,allowedTags:g}),Ge&&e.hasChildNodes()&&!qt(e.firstElementChild)&&G(/<[/\w!]/g,e.innerHTML)&&G(/<[/\w!]/g,e.textContent)||e.nodeType===Me.progressingInstruction||Ge&&e.nodeType===Me.comment&&G(/<[/\w]/g,e.data))return ie(e),!0;if(!(k.tagCheck instanceof Function&&k.tagCheck(m))&&(!g[m]||ue[m])){if(!ue[m]&&nn(m)&&(A.tagNameCheck instanceof RegExp&&G(A.tagNameCheck,m)||A.tagNameCheck instanceof Function&&A.tagNameCheck(m)))return!1;if(dt&&!le[m]){const L=re(e)||e.parentNode,z=ce(e)||e.childNodes;if(z&&L){const M=z.length;for(let J=M-1;J>=0;--J){const pe=w(z[J],!0);pe.__removalCount=(e.__removalCount||0)+1,L.insertBefore(pe,ye(e))}}}return ie(e),!0}return e instanceof p&&!po(e)||(m==="noscript"||m==="noembed"||m==="noframes")&&G(/<\/no(script|embed|frames)/i,e.innerHTML)?(ie(e),!0):(_e&&e.nodeType===Me.text&&(u=e.textContent,Ue([v,D,P],L=>{u=ke(u,L," ")}),e.textContent!==u&&(Le(t.removed,{element:e.cloneNode()}),e.textContent=u)),fe(N.afterSanitizeElements,e,null),!1)},tn=function(e,u,m){if(Gt&&(u==="id"||u==="name")&&(m in s||m in fo))return!1;if(!(be&&!he[u]&&G(K,u))){if(!(de&&G($,u))){if(!(k.attributeCheck instanceof Function&&k.attributeCheck(u,e))){if(!_[u]||he[u]){if(!(nn(e)&&(A.tagNameCheck instanceof RegExp&&G(A.tagNameCheck,e)||A.tagNameCheck instanceof Function&&A.tagNameCheck(e))&&(A.attributeNameCheck instanceof RegExp&&G(A.attributeNameCheck,u)||A.attributeNameCheck instanceof Function&&A.attributeNameCheck(u,e))||u==="is"&&A.allowCustomizedBuiltInElements&&(A.tagNameCheck instanceof RegExp&&G(A.tagNameCheck,m)||A.tagNameCheck instanceof Function&&A.tagNameCheck(m))))return!1}else if(!ft[u]){if(!G(i,ke(m,se,""))){if(!((u==="src"||u==="xlink:href"||u==="href")&&e!=="script"&&Gn(m,"data:")===0&&Bt[e])){if(!(We&&!G(ae,ke(m,se,"")))){if(m)return!1}}}}}}}return!0},nn=function(e){return e!=="annotation-xml"&&rt(e,te)},on=function(e){fe(N.beforeSanitizeAttributes,e,null);const{attributes:u}=e;if(!u||bt(e))return;const m={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_,forceKeepAttr:void 0};let L=u.length;for(;L--;){const z=u[L],{name:M,namespaceURI:J,value:pe}=z,Ce=I(M),Et=pe;let U=M==="value"?Et:Yn(Et);if(m.attrName=Ce,m.attrValue=U,m.keepAttr=!0,m.forceKeepAttr=void 0,fe(N.uponSanitizeAttribute,e,m),U=m.attrValue,Yt&&(Ce==="id"||Ce==="name")&&(xe(M,e),U=lo+U),Ge&&G(/((--!?|])>)|<\/(style|title|textarea)/i,U)){xe(M,e);continue}if(Ce==="attributename"&&rt(U,"href")){xe(M,e);continue}if(m.forceKeepAttr)continue;if(!m.keepAttr){xe(M,e);continue}if(!Wt&&G(/\/>/i,U)){xe(M,e);continue}_e&&Ue([v,D,P],an=>{U=ke(U,an," ")});const rn=I(e.nodeName);if(!tn(rn,Ce,U)){xe(M,e);continue}if(C&&typeof R=="object"&&typeof R.getAttributeType=="function"&&!J)switch(R.getAttributeType(rn,Ce)){case"TrustedHTML":{U=C.createHTML(U);break}case"TrustedScriptURL":{U=C.createScriptURL(U);break}}if(U!==Et)try{J?e.setAttributeNS(J,M,U):e.setAttribute(M,U),bt(e)?ie(e):kt(t.removed)}catch{xe(M,e)}}fe(N.afterSanitizeAttributes,e,null)},go=function h(e){let u=null;const m=Qt(e);for(fe(N.beforeSanitizeShadowDOM,e,null);u=m.nextNode();)fe(N.uponSanitizeShadowNode,u,null),en(u),on(u),u.content instanceof a&&h(u.content);fe(N.afterSanitizeShadowDOM,e,null)};return t.sanitize=function(h){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=null,m=null,L=null,z=null;if(pt=!h,pt&&(h="<!-->"),typeof h!="string"&&!qt(h))if(typeof h.toString=="function"){if(h=h.toString(),typeof h!="string")throw Oe("dirty is not a string, aborting")}else throw Oe("toString is not a function");if(!t.isSupported)return h;if(ct||ht(e),t.removed=[],typeof h=="string"&&(Ie=!1),Ie){if(h.nodeName){const pe=I(h.nodeName);if(!g[pe]||ue[pe])throw Oe("root node is forbidden and cannot be sanitized in-place")}}else if(h instanceof d)u=$t("<!---->"),m=u.ownerDocument.importNode(h,!0),m.nodeType===Me.element&&m.nodeName==="BODY"||m.nodeName==="HTML"?u=m:u.appendChild(m);else{if(!Ne&&!_e&&!Ee&&h.indexOf("<")===-1)return C&&Be?C.createHTML(h):h;if(u=$t(h),!u)return Ne?null:Be?q:""}u&&ut&&ie(u.firstChild);const M=Qt(Ie?h:u);for(;L=M.nextNode();)en(L),on(L),L.content instanceof a&&go(L.content);if(Ie)return h;if(Ne){if(Ye)for(z=j.call(u.ownerDocument);u.firstChild;)z.appendChild(u.firstChild);else z=u;return(_.shadowroot||_.shadowrootmode)&&(z=V.call(o,z,!0)),z}let J=Ee?u.outerHTML:u.innerHTML;return Ee&&g["!doctype"]&&u.ownerDocument&&u.ownerDocument.doctype&&u.ownerDocument.doctype.name&&G(Pt,u.ownerDocument.doctype.name)&&(J="<!DOCTYPE "+u.ownerDocument.doctype.name+`>
`+J),_e&&Ue([v,D,P],pe=>{J=ke(J,pe," ")}),C&&Be?C.createHTML(J):J},t.setConfig=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ht(h),ct=!0},t.clearConfig=function(){Re=null,ct=!1},t.isValidAttribute=function(h,e,u){Re||ht({});const m=I(h),L=I(e);return tn(m,L,u)},t.addHook=function(h,e){typeof e=="function"&&Le(N[h],e)},t.removeHook=function(h,e){if(e!==void 0){const u=zn(N[h],e);return u===-1?void 0:Wn(N[h],u,1)[0]}return kt(N[h])},t.removeHooks=function(h){N[h]=[]},t.removeAllHooks=function(){N=Ut()},t}var zt=Ft();const ao=({content:n="",onChange:t,onBlur:s,onFocus:o,config:l={showTextFormat:!0,showInlineFormat:!0,showAlignment:!0,showList:!0,showInsert:!0,showCodeView:!0}})=>{const a=x.useRef(null),[c,d]=x.useState({bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,bulletList:!1,numberedList:!1}),[p,f]=x.useState("p"),[b,E]=x.useState(!1),[O,R]=x.useState(n),H=y=>{const X=window.getSelection();if(!X||X.rangeCount===0)return;const j=X.getRangeAt(0);let B=j.commonAncestorContainer;B.nodeType===Node.TEXT_NODE&&(B=B.parentNode);let V=null,N=B;for(;N&&N!==a.current;){if(N.nodeType===Node.ELEMENT_NODE){const v=N,D=v.tagName.toLowerCase();if(["p","h1","h2","h3","h4","h5","h6","div"].includes(D)){V=v;break}}N=N.parentNode}if(V&&V!==a.current){const v=document.createElement(y);v.innerHTML=V.innerHTML,V.style.textAlign&&(v.style.textAlign=V.style.textAlign),V.parentNode?.replaceChild(v,V),f(y);const D=document.createRange();D.selectNodeContents(v),X.removeAllRanges(),X.addRange(D)}else{const v=document.createElement(y);if(j.toString())try{j.surroundContents(v)}catch{const P=j.extractContents();v.appendChild(P),j.insertNode(v)}else{v.innerHTML="<br>",j.insertNode(v);const D=document.createRange();D.setStart(v,0),D.collapse(!0),X.removeAllRanges(),X.addRange(D)}f(y)}setTimeout(()=>C(),10)},w=()=>{if(a.current)if(b){const y=zt.sanitize(O);a.current.innerHTML=y,a.current.contentEditable="true",E(!1)}else{const y=a.current.innerHTML;R(y),a.current.contentEditable="false",a.current.textContent=y,E(!0)}},Z=()=>{if(a.current&&t){const y=b?a.current.textContent||"":a.current.innerHTML;t(y)}},ye=()=>{if(b&&a.current){const y=a.current.textContent||"";R(y),t&&t(y)}},ce=()=>{if(s&&a.current){const y=a.current.textContent||"";s(y)}},re=()=>{o&&o()};x.useEffect(()=>{if(a.current&&n!==void 0){const y=zt.sanitize(n);b?a.current.textContent=y:a.current.innerHTML=y,R(y)}},[n,b]);const C=()=>{const y=window.getSelection();if(!y||y.rangeCount===0)return;let j=y.getRangeAt(0).commonAncestorContainer;j.nodeType===Node.TEXT_NODE&&(j=j.parentNode);let B=j,V="p";for(;B&&B!==a.current;){if(["H1","H2","H3","H4","H5","H6","P"].includes(B.tagName)){V=B.tagName.toLowerCase();break}B=B.parentElement}f(V);let N=j,v=!1,D=!1;for(;N&&N!==a.current;){if(N.tagName==="UL"){v=!0;break}else if(N.tagName==="OL"){D=!0;break}N=N.parentElement}const P=se=>{let te=j;for(;te&&te!==a.current;){if(te.nodeType===Node.ELEMENT_NODE&&te.tagName.toLowerCase()===se.toLowerCase())return!0;te=te.parentNode}return!1};let K=j;for(;K&&K!==a.current;){if(K.nodeType===Node.ELEMENT_NODE){const se=K.tagName.toLowerCase();if(["h1","h2","h3","h4","h5","h6","p"].includes(se)){f(se);break}}K=K.parentNode}(K===a.current||!K)&&f("p");let $=j;for(;$&&$!==a.current&&$.nodeType!==Node.ELEMENT_NODE;)$=$.parentNode;const ae=$&&$.nodeType===Node.ELEMENT_NODE?$.style.textAlign:"";d({bold:P("strong")||P("b"),italic:P("em")||P("i"),underline:P("u"),strikethrough:P("s")||P("strike")||P("del"),alignLeft:ae===""||ae==="left",alignCenter:ae==="center",alignRight:ae==="right",alignJustify:ae==="justify",bulletList:v,numberedList:D})},q=()=>{const y=window.getSelection();if(y&&y.rangeCount>0){const X=y.getRangeAt(0);a.current?.contains(X.commonAncestorContainer)&&C()}};return x.useEffect(()=>(document.addEventListener("selectionchange",q),()=>{document.removeEventListener("selectionchange",q)}),[]),r.jsxs("div",{className:"teddy-editor w-full min-h-screen bg-gray-100 flex flex-col items-center pb-8 relative",children:[!b&&r.jsx(Pn,{config:l,activeFormats:c,currentTextFormat:p,updateActiveFormats:C,applyTextFormat:H,toggleCodeView:w,isCodeView:b,editorRef:a}),!b&&r.jsx(vn,{editorRef:a,activeFormats:c,currentTextFormat:p,updateActiveFormats:C,applyTextFormat:H}),r.jsx("div",{ref:a,contentEditable:!b,className:`document-page outline-none focus:ring-0 ${b?"font-mono text-sm bg-gray-50 whitespace-pre-wrap !p-8":"prose prose-headings:mt-4 prose-headings:mb-2"}`,style:{whiteSpace:"pre-wrap",marginTop:"2rem",minHeight:"1000px"},onMouseUp:b?void 0:C,onKeyUp:b?void 0:C,onInput:b?ye:Z,onBlur:ce,onFocus:re})]})};function so(){return r.jsx("div",{className:"max-w-[800px] mx-auto",children:r.jsx(ao,{content:"<p>Initial content</p>",onChange:n=>console.log("Content changed:",n),onBlur:n=>console.log("Editor lost focus",n),onFocus:()=>console.log("Editor gained focus")})})}return so});
