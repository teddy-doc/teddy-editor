(function(y,ue){typeof exports=="object"&&typeof module<"u"?module.exports=ue(require("react")):typeof define=="function"&&define.amd?define(["react"],ue):(y=typeof globalThis<"u"?globalThis:y||self,y.TeddyEditor=ue(y.React))})(this,function(y){"use strict";var ue={exports:{}},_e={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Et;function an(){if(Et)return _e;Et=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(r,l,a){var i=null;if(a!==void 0&&(i=""+a),l.key!==void 0&&(i=""+l.key),"key"in l){a={};for(var d in l)d!=="key"&&(a[d]=l[d])}else a=l;return l=a.ref,{$$typeof:o,type:r,key:i,ref:l!==void 0?l:null,props:a}}return _e.Fragment=n,_e.jsx=s,_e.jsxs=s,_e}var we={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tt;function sn(){return Tt||(Tt=1,process.env.NODE_ENV!=="production"&&function(){function o(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Q?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case N:return"Fragment";case V:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case j:return"SuspenseList";case K:return"Activity"}if(typeof c=="object")switch(typeof c.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),c.$$typeof){case E:return"Portal";case I:return(c.displayName||"Context")+".Provider";case k:return(c._context.displayName||"Context")+".Consumer";case v:var g=c.render;return c=c.displayName,c||(c=g.displayName||g.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case z:return g=c.displayName||null,g!==null?g:o(c.type)||"Memo";case X:g=c._payload,c=c._init;try{return o(c(g))}catch{}}return null}function n(c){return""+c}function s(c){try{n(c);var g=!1}catch{g=!0}if(g){g=console;var R=g.error,_=typeof Symbol=="function"&&Symbol.toStringTag&&c[Symbol.toStringTag]||c.constructor.name||"Object";return R.call(g,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",_),n(c)}}function r(c){if(c===N)return"<>";if(typeof c=="object"&&c!==null&&c.$$typeof===X)return"<...>";try{var g=o(c);return g?"<"+g+">":"<...>"}catch{return"<...>"}}function l(){var c=S.A;return c===null?null:c.getOwner()}function a(){return Error("react-stack-top-frame")}function i(c){if(ee.call(c,"key")){var g=Object.getOwnPropertyDescriptor(c,"key").get;if(g&&g.isReactWarning)return!1}return c.key!==void 0}function d(c,g){function R(){Fe||(Fe=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",g))}R.isReactWarning=!0,Object.defineProperty(c,"key",{get:R,configurable:!0})}function f(){var c=o(this.type);return ze[c]||(ze[c]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),c=this.props.ref,c!==void 0?c:null}function m(c,g,R,_,te,w,ae,me){return R=w.ref,c={$$typeof:H,type:c,key:g,props:w,_owner:te},(R!==void 0?R:null)!==null?Object.defineProperty(c,"ref",{enumerable:!1,get:f}):Object.defineProperty(c,"ref",{enumerable:!1,value:null}),c._store={},Object.defineProperty(c._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(c,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(c,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ae}),Object.defineProperty(c,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:me}),Object.freeze&&(Object.freeze(c.props),Object.freeze(c)),c}function x(c,g,R,_,te,w,ae,me){var O=g.children;if(O!==void 0)if(_)if($(O)){for(_=0;_<O.length;_++)b(O[_]);Object.freeze&&Object.freeze(O)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else b(O);if(ee.call(g,"key")){O=o(c);var se=Object.keys(g).filter(function(Ye){return Ye!=="key"});_=0<se.length?"{key: someKey, "+se.join(": ..., ")+": ...}":"{key: someKey}",Ge[O+_]||(se=0<se.length?"{"+se.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,_,O,se,O),Ge[O+_]=!0)}if(O=null,R!==void 0&&(s(R),O=""+R),i(g)&&(s(g.key),O=""+g.key),"key"in g){R={};for(var fe in g)fe!=="key"&&(R[fe]=g[fe])}else R=g;return O&&d(R,typeof c=="function"?c.displayName||c.name||"Unknown":c),m(c,O,w,te,l(),R,ae,me)}function b(c){typeof c=="object"&&c!==null&&c.$$typeof===H&&c._store&&(c._store.validated=1)}var M=y,H=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),I=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),Q=Symbol.for("react.client.reference"),S=M.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=Object.prototype.hasOwnProperty,$=Array.isArray,de=console.createTask?console.createTask:function(){return null};M={"react-stack-bottom-frame":function(c){return c()}};var Fe,ze={},We=M["react-stack-bottom-frame"].bind(M,a)(),ke=de(r(a)),Ge={};we.Fragment=N,we.jsx=function(c,g,R,_,te){var w=1e4>S.recentlyCreatedOwnerStacks++;return x(c,g,R,!1,_,te,w?Error("react-stack-top-frame"):We,w?de(r(c)):ke)},we.jsxs=function(c,g,R,_,te){var w=1e4>S.recentlyCreatedOwnerStacks++;return x(c,g,R,!0,_,te,w?Error("react-stack-top-frame"):We,w?de(r(c)):ke)}}()),we}var Nt;function ln(){return Nt||(Nt=1,process.env.NODE_ENV==="production"?ue.exports=an():ue.exports=sn()),ue.exports}var t=ln();/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),un=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,r)=>r?r.toUpperCase():s.toLowerCase()),_t=o=>{const n=un(o);return n.charAt(0).toUpperCase()+n.slice(1)},wt=(...o)=>o.filter((n,s,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===s).join(" ").trim(),dn=o=>{for(const n in o)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=y.forwardRef(({color:o="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:l="",children:a,iconNode:i,...d},f)=>y.createElement("svg",{ref:f,...mn,width:n,height:n,stroke:o,strokeWidth:r?Number(s)*24/Number(n):s,className:wt("lucide",l),...!a&&!dn(d)&&{"aria-hidden":"true"},...d},[...i.map(([m,x])=>y.createElement(m,x)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=(o,n)=>{const s=y.forwardRef(({className:r,...l},a)=>y.createElement(fn,{ref:a,iconNode:n,className:wt(`lucide-${cn(_t(o))}`,`lucide-${o}`,r),...l}));return s.displayName=_t(o),s};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=P("align-center",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=P("align-justify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=P("align-left",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=P("align-right",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=P("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=P("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=P("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=P("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=P("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=P("list-ordered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=P("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=P("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=P("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=P("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=P("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=P("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=P("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=P("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=P("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ie=(o,n,s)=>{const r=window.getSelection();if(!r||r.rangeCount===0||!n.current)return;const l=r.getRangeAt(0);if(l.toString())try{const a=()=>{let m=l.commonAncestorContainer;for(;m&&m!==n.current;){if(m.nodeType===Node.ELEMENT_NODE){const x=m;if(x.tagName.toLowerCase()===o.toLowerCase())return{isFormatted:!0,formatElement:x}}m=m.parentNode}return{isFormatted:!1,formatElement:null}},{isFormatted:i,formatElement:d}=a();let f=null;if(i&&d){const m=d.parentNode,x=document.createTextNode(d.textContent||"");m?.replaceChild(x,d),m?.normalize();const b=document.createRange();b.selectNodeContents(x),r.removeAllRanges(),r.addRange(b)}else{f=document.createElement(o);try{l.surroundContents(f);const m=document.createRange();m.selectNodeContents(f),r.removeAllRanges(),r.addRange(m)}catch{const x=l.extractContents();f.appendChild(x),l.insertNode(f);const b=document.createRange();b.selectNodeContents(f),r.removeAllRanges(),r.addRange(b)}}s()}catch(a){console.warn("Error applying format:",a),s()}},At=({editorRef:o,activeFormats:n,updateActiveFormats:s,getButtonClass:r})=>t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>Ie("strong",o,s),className:r(n.bold),title:"Bold",children:t.jsx(xn,{size:18})}),t.jsx("button",{onClick:()=>Ie("em",o,s),className:r(n.italic),title:"Italic",children:t.jsx(En,{size:18})}),t.jsx("button",{onClick:()=>Ie("u",o,s),className:r(n.underline),title:"Underline",children:t.jsx(Sn,{size:18})}),t.jsx("button",{onClick:()=>Ie("s",o,s),className:r(n.strikethrough),title:"Strikethrough",children:t.jsx(vn,{size:18})})]}),De=(o,n)=>{const s=window.getSelection();if(!s||s.rangeCount===0)return;let l=s.getRangeAt(0).commonAncestorContainer;for(;l&&l.nodeType!==Node.ELEMENT_NODE;)l=l.parentNode;if(l&&l.nodeType===Node.ELEMENT_NODE){const a=l;a.style.textAlign=o==="left"?"":o,n()}},vt=({activeFormats:o,updateActiveFormats:n,getButtonClass:s})=>t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>De("left",n),className:s(o.alignLeft),title:"Align Left",children:t.jsx(hn,{size:18})}),t.jsx("button",{onClick:()=>De("center",n),className:s(o.alignCenter),title:"Align Center",children:t.jsx(pn,{size:18})}),t.jsx("button",{onClick:()=>De("right",n),className:s(o.alignRight),title:"Align Right",children:t.jsx(bn,{size:18})}),t.jsx("button",{onClick:()=>De("justify",n),className:s(o.alignJustify),title:"Justify",children:t.jsx(gn,{size:18})})]}),Rt=(o,n,s)=>{const r=window.getSelection();if(!r||r.rangeCount===0||!n.current)return;const l=r.getRangeAt(0);let a=l.commonAncestorContainer;a.nodeType===Node.TEXT_NODE&&(a=a.parentNode);let i=a;for(;i&&i!==n.current&&!["P","H1","H2","H3","H4","H5","H6","LI","UL","OL"].includes(i.tagName);)i=i.parentElement;if(!i||i===n.current){const d=document.createElement(o),f=document.createElement("li");f.textContent=r.toString()||"List item",d.appendChild(f),l.deleteContents(),l.insertNode(d);const m=document.createRange();m.setStart(f,0),m.setEnd(f,f.childNodes.length),r.removeAllRanges(),r.addRange(m)}else if(i.tagName==="LI"){const d=i.parentElement;if(d.tagName.toLowerCase()===o){const f=document.createElement("p");f.innerHTML=i.innerHTML,d.parentNode?.replaceChild(f,d)}else{const f=document.createElement(o);f.innerHTML=d.innerHTML,d.parentNode?.replaceChild(f,d)}}else{const d=document.createElement(o),f=document.createElement("li");f.innerHTML=i.innerHTML,d.appendChild(f),i.parentNode?.replaceChild(d,i)}s()},St=({editorRef:o,activeFormats:n,updateActiveFormats:s,getButtonClass:r})=>t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>{o?.current&&Rt("ul",o,s)},className:r(n.bulletList),title:"Bullet List",children:t.jsx(_n,{size:18})}),t.jsx("button",{onClick:()=>{o?.current&&Rt("ol",o,s)},className:r(n.numberedList),title:"Numbered List",children:t.jsx(Nn,{size:18})})]}),Ln=({editorRef:o,activeFormats:n,currentTextFormat:s,updateActiveFormats:r,applyTextFormat:l})=>{const[a,i]=y.useState({top:0,left:0}),[d,f]=y.useState(!1),[m,x]=y.useState(!1),b=y.useRef(null),M=[{value:"p",label:"Paragraph",tag:"p"},{value:"h1",label:"Heading 1",tag:"h1"},{value:"h2",label:"Heading 2",tag:"h2"},{value:"h3",label:"Heading 3",tag:"h3"},{value:"h4",label:"Heading 4",tag:"h4"},{value:"h5",label:"Heading 5",tag:"h5"},{value:"h6",label:"Heading 6",tag:"h6"}];y.useEffect(()=>{const N=()=>{const A=window.getSelection();if(!A||A.rangeCount===0||A.isCollapsed||!o.current||!o.current.contains(A.anchorNode)){f(!1),x(!1);return}const k=A.getRangeAt(0).getBoundingClientRect(),I=b.current?.offsetHeight||50,v=k.top-I-45,L=k.left+k.width/2;i({top:v,left:L}),f(!0)};return document.addEventListener("selectionchange",N),window.addEventListener("scroll",N,!0),window.addEventListener("resize",N),()=>{document.removeEventListener("selectionchange",N),window.removeEventListener("scroll",N,!0),window.removeEventListener("resize",N)}},[o]);const H=N=>`p-1.5 rounded transition-colors ${N?"bg-blue-100 text-blue-600 hover:bg-blue-200":"text-gray-600 hover:bg-gray-100"}`,E=N=>{l(N),x(!1)};return d?t.jsxs("div",{ref:b,className:"fixed z-50 flex items-center gap-1 p-1 bg-white rounded-lg shadow-lg border border-gray-200 animate-in fade-in zoom-in-95 duration-200",style:{top:`${a.top}px`,left:`${a.left}px`,transform:"translateX(-50%)"},onMouseDown:N=>{N.preventDefault()},children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>x(!m),className:"flex items-center gap-1 px-2 py-1.5 text-sm text-gray-700 hover:bg-gray-100 rounded min-w-[100px] justify-between",children:[t.jsx("span",{className:"truncate max-w-[80px]",children:M.find(N=>N.value===s)?.label||"Paragraph"}),t.jsx(Oe,{size:12})]}),m&&t.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-xl overflow-hidden min-w-[140px] max-h-[300px] overflow-y-auto",children:M.map(N=>t.jsx("button",{onClick:()=>E(N.tag),className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${s===N.value?"bg-blue-50 text-blue-600":"text-gray-700"}`,children:N.label},N.value))})]}),t.jsx("div",{className:"w-px h-5 bg-gray-200 mx-1"}),t.jsx(At,{editorRef:o,activeFormats:n,updateActiveFormats:r,getButtonClass:H}),t.jsx("div",{className:"w-px h-5 bg-gray-200 mx-1"}),t.jsx(St,{editorRef:o,activeFormats:{bulletList:n.bulletList,numberedList:n.numberedList},updateActiveFormats:r,getButtonClass:H}),t.jsx("div",{className:"w-px h-5 bg-gray-200 mx-1"}),t.jsx(vt,{activeFormats:{alignLeft:n.alignLeft,alignCenter:n.alignCenter,alignRight:n.alignRight,alignJustify:n.alignJustify},updateActiveFormats:r,getButtonClass:H})]}):null};let he=null;const $e=()=>{const o=window.getSelection();o&&o.rangeCount>0&&(he=o.getRangeAt(0).cloneRange())},qe=()=>{if(he){const o=window.getSelection();o?.removeAllRanges(),o?.addRange(he)}},et=()=>{const o=window.getSelection();if(!o||o.rangeCount===0)return null;let s=o.getRangeAt(0).commonAncestorContainer;s.nodeType===Node.TEXT_NODE&&(s=s.parentNode);let r=s;for(;r&&r!==document.body;){if(r.nodeType===Node.ELEMENT_NODE){const l=r,a=l.tagName.toLowerCase();if(a==="a")return{type:"link",url:l.getAttribute("href")||"",text:l.textContent||""};if(a==="img")return{type:"image",src:l.getAttribute("src")||"",alt:l.getAttribute("alt")||""};if(a==="iframe")return{type:"video",src:l.getAttribute("src")||""}}r=r.parentNode}return null},jn=(o,n)=>{qe();const s=window.getSelection();if(!s||s.rangeCount===0){const i=document.querySelector('[contenteditable="true"]');if(i){const d=document.createElement("a");d.href=o,d.textContent=n||o,d.target="_blank",d.rel="noopener noreferrer",d.className="text-blue-600 underline hover:text-blue-800",i.appendChild(d);const f=document.createTextNode(" ");i.appendChild(f);const m=document.createRange();m.setStartAfter(f),m.collapse(!0),s&&(s.removeAllRanges(),s.addRange(m))}return}const r=s.getRangeAt(0);let l=null,a=r.commonAncestorContainer;for(;a&&a!==document.body;){if(a.nodeType===Node.ELEMENT_NODE&&a.tagName.toLowerCase()==="a"){l=a;break}a=a.parentNode}if(l)l.setAttribute("href",o),l.textContent=n||o;else{const i=document.createElement("a");i.href=o,i.textContent=n||o,i.target="_blank",i.rel="noopener noreferrer",i.className="text-blue-600 underline hover:text-blue-800",r.deleteContents(),r.insertNode(i);const d=document.createRange();d.setStartAfter(i),d.collapse(!0),s.removeAllRanges(),s.addRange(d)}he=null},On=(o,n="Inserted image")=>{qe();const s=window.getSelection();if(!s||s.rangeCount===0){const i=document.querySelector('[contenteditable="true"]');if(i){const d=document.createElement("img");d.src=o,d.alt=n,d.className="max-w-full h-auto rounded shadow-sm",i.appendChild(d);const f=document.createElement("br");i.appendChild(f);const m=document.createRange();m.setStartAfter(f),m.collapse(!0),s&&(s.removeAllRanges(),s.addRange(m))}return}const r=s.getRangeAt(0);let l=null,a=r.commonAncestorContainer;for(;a&&a!==document.body;){if(a.nodeType===Node.ELEMENT_NODE&&a.tagName.toLowerCase()==="img"){l=a;break}a=a.parentNode}if(l)l.setAttribute("src",o),l.setAttribute("alt",n);else{const i=document.createElement("img");i.src=o,i.alt=n,i.className="max-w-full h-auto rounded shadow-sm",r.deleteContents(),r.insertNode(i);const d=document.createRange();d.setStartAfter(i),d.collapse(!0),s.removeAllRanges(),s.addRange(d)}he=null},Mn=o=>{qe();const n=window.getSelection();if(!n||n.rangeCount===0){const a=document.querySelector('[contenteditable="true"]');if(a){const i=document.createElement("iframe");i.src=o,i.width="560",i.height="315",i.className="max-w-full rounded shadow-sm",i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen","true"),i.setAttribute("sandbox","allow-scripts allow-same-origin allow-presentation"),a.appendChild(i);const d=document.createElement("br");a.appendChild(d);const f=document.createRange();f.setStartAfter(d),f.collapse(!0),n&&(n.removeAllRanges(),n.addRange(f))}return}const s=n.getRangeAt(0);let r=null,l=s.commonAncestorContainer;for(;l&&l!==document.body;){if(l.nodeType===Node.ELEMENT_NODE&&l.tagName.toLowerCase()==="iframe"){r=l;break}l=l.parentNode}if(r)r.setAttribute("src",o);else{const a=document.createElement("iframe");a.src=o,a.width="560",a.height="315",a.className="max-w-full rounded shadow-sm",a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen","true"),a.setAttribute("sandbox","allow-scripts allow-same-origin allow-presentation"),s.deleteContents(),s.insertNode(a);const i=document.createRange();i.setStartAfter(a),i.collapse(!0),n.removeAllRanges(),n.addRange(i)}he=null},In=({isOpen:o,onClose:n,onInsert:s,initialData:r})=>{const[l,a]=y.useState(""),[i,d]=y.useState("");y.useEffect(()=>{o&&r?(a(r.url),d(r.text)):o&&!r&&(a(""),d(""))},[o,r]);const f=m=>{m.preventDefault(),l.trim()&&(s(l.trim(),i.trim()),a(""),d(""),n())};return o?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-full mx-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:r?"Edit Link":"Insert Link"}),t.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:t.jsx(Me,{size:20})})]}),t.jsxs("form",{onSubmit:f,children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL"}),t.jsx("input",{type:"url",value:l,onChange:m=>a(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com",required:!0,autoFocus:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link Text (optional)"}),t.jsx("input",{type:"text",value:i,onChange:m=>d(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Link text"})]}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:r?"Update Link":"Insert Link"})]})]})]})}):null},Dn=({isOpen:o,onClose:n,onInsert:s,initialData:r})=>{const[l,a]=y.useState(""),[i,d]=y.useState(""),f=y.useRef(null);y.useEffect(()=>{o&&r?(a(r.alt),d(r.src)):o&&!r&&(a(""),d(""))},[o,r]);const m=M=>{const H=M.target.files?.[0];if(H){const E=new FileReader;E.onload=N=>{const A=N.target?.result;s(A,l||H.name),a(""),d(""),n(),f.current&&(f.current.value="")},E.readAsDataURL(H)}},x=()=>{r&&i&&(s(i,l),a(""),d(""),n())},b=()=>{f.current&&f.current.click()};return o?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-full mx-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:r?"Edit Image":"Insert Image"}),t.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:t.jsx(Me,{size:20})})]}),r&&t.jsxs("div",{className:"mb-4",children:[t.jsx("img",{src:i,alt:l,className:"max-w-full h-32 object-contain rounded border"}),t.jsx("button",{type:"button",onClick:b,className:"mt-2 px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Replace Image"})]}),t.jsx("input",{ref:f,type:"file",accept:"image/*",onChange:m,className:"hidden"}),!r&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Image File"}),t.jsx("input",{type:"file",accept:"image/*",onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alt Text (optional)"}),t.jsx("input",{type:"text",value:l,onChange:M=>a(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Image description",autoFocus:!!r})]}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{onClick:n,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),r&&t.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Image"})]})]})}):null},Pn=({isOpen:o,onClose:n,onInsert:s,initialData:r})=>{const[l,a]=y.useState(""),[i,d]=y.useState("");y.useEffect(()=>{o&&r?a(r.src):o&&!r&&a(""),d("")},[o,r]);const f=x=>{const b=x.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([\w-]+)/);if(b)return`https://www.youtube.com/embed/${b[1]}`;const M=x.match(/vimeo\.com\/(?:video\/)?(\d+)/);return M?`https://player.vimeo.com/video/${M[1]}`:x.includes("youtube.com/embed/")||x.includes("player.vimeo.com/video/")?x:null},m=x=>{if(x.preventDefault(),d(""),l.trim()){const b=f(l.trim());b?(s(b),a(""),n()):d("Invalid URL. Only YouTube and Vimeo are supported for security.")}};return o?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-full mx-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:r?"Edit Video":"Insert Video"}),t.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:t.jsx(Me,{size:20})})]}),t.jsxs("form",{onSubmit:m,children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video URL"}),t.jsx("input",{type:"url",value:l,onChange:x=>a(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"YouTube, Vimeo, or embed URL",required:!0,autoFocus:!0}),i&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:i}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Supports YouTube, Vimeo, and direct embed URLs"})]}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:r?"Update Video":"Insert Video"})]})]})]})}):null},Hn=()=>{const[o,n]=y.useState(!1),[s,r]=y.useState(!1),[l,a]=y.useState(!1),[i,d]=y.useState(null),f=()=>{$e();const b=et();d(b?.type==="link"?b:null),n(!0)},m=()=>{$e();const b=et();d(b?.type==="image"?b:null),r(!0)},x=()=>{$e();const b=et();d(b?.type==="video"?b:null),a(!0)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:f,className:"p-2 rounded transition-colors hover:bg-gray-200",title:"Insert Link",children:t.jsx(Tn,{size:18})}),t.jsx("button",{onClick:m,className:"p-2 rounded transition-colors hover:bg-gray-200",title:"Insert Image",children:t.jsx(yn,{size:18})}),t.jsx("button",{onClick:x,className:"p-2 rounded transition-colors hover:bg-gray-200",title:"Insert Video",children:t.jsx(kn,{size:18})})]}),t.jsx(In,{isOpen:o,onClose:()=>{n(!1),d(null)},onInsert:jn,initialData:i?.type==="link"?{url:i.url,text:i.text}:null}),t.jsx(Dn,{isOpen:s,onClose:()=>{r(!1),d(null)},onInsert:On,initialData:i?.type==="image"?{src:i.src,alt:i.alt}:null}),t.jsx(Pn,{isOpen:l,onClose:()=>{a(!1),d(null)},onInsert:Mn,initialData:i?.type==="video"?{src:i.src}:null})]})},Un=({getButtonClass:o})=>{const n=r=>{r.preventDefault(),document.execCommand("undo")},s=r=>{r.preventDefault(),document.execCommand("redo")};return t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onMouseDown:n,className:o(!1),title:"Undo",children:t.jsx(Cn,{size:18})}),t.jsx("button",{onMouseDown:s,className:o(!1),title:"Redo",children:t.jsx(An,{size:18})})]})},Fn=({getButtonClass:o,updateActiveFormats:n})=>{const[s,r]=y.useState(!1),[l,a]=y.useState(!1),[i,d]=y.useState(!1),f=["#000000","#434343","#666666","#999999","#b7b7b7","#cccccc","#d9d9d9","#efefef","#f3f3f3","#ffffff","#980000","#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#4a86e8","#0000ff","#9900ff","#ff00ff","#e6b8af","#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#c9daf8","#cfe2f3","#d9d2e9","#ead1dc","#dd7e6b","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#a4c2f4","#9fc5e8","#b4a7d6","#d5a6bd","#cc4125","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6d9eeb","#6fa8dc","#8e7cc3","#c27ba0","#a61c00","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3c78d8","#3d85c6","#674ea7","#a64d79"],m=[{name:"Sans Serif",value:"Arial, Helvetica, sans-serif"},{name:"Serif",value:"Times New Roman, Times, serif"},{name:"Monospace",value:"Courier New, Courier, monospace"}],x=[{label:"Small",value:"1"},{label:"Normal",value:"3"},{label:"Large",value:"5"},{label:"Huge",value:"7"}],b=E=>{document.execCommand("foreColor",!1,E),r(!1),n()},M=E=>{document.execCommand("fontName",!1,E),a(!1),n()},H=E=>{document.execCommand("fontSize",!1,E),d(!1),n()};return t.jsxs("div",{className:"flex gap-1 items-center relative",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>a(!l),onBlur:()=>setTimeout(()=>a(!1),200),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded min-w-[100px] justify-between transition-colors",title:"Font Family",children:[t.jsx("span",{className:"font-medium truncate max-w-[80px]",children:"Font"}),t.jsx(Oe,{size:14,className:"text-gray-500"})]}),l&&t.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 min-w-[160px]",children:m.map(E=>t.jsx("button",{onMouseDown:N=>{N.preventDefault(),M(E.value)},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 text-gray-700 font-medium",style:{fontFamily:E.value},children:E.name},E.name))})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>d(!i),onBlur:()=>setTimeout(()=>d(!1),200),className:"flex items-center gap-2 px-2 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded min-w-[60px] justify-between transition-colors",title:"Font Size",children:[t.jsx("span",{className:"font-medium",children:"Size"}),t.jsx(Oe,{size:14,className:"text-gray-500"})]}),i&&t.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 min-w-[100px]",children:x.map(E=>t.jsx("button",{onMouseDown:N=>{N.preventDefault(),H(E.value)},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 text-gray-700",children:E.label},E.label))})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>r(!s),onBlur:()=>setTimeout(()=>r(!1),200),className:o(s),title:"Text Color",children:t.jsx(wn,{size:18})}),s&&t.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 p-2 w-[180px] flex flex-wrap gap-1",children:f.map(E=>t.jsx("button",{onMouseDown:N=>{N.preventDefault(),b(E)},className:"w-5 h-5 rounded border border-gray-300 hover:scale-110 transition-transform",style:{backgroundColor:E},title:E},E))})]})]})},zn=({getButtonClass:o})=>{const[n,s]=y.useState(!1),[r,l]=y.useState(2),[a,i]=y.useState(2),d=f=>{f.preventDefault();let m='<table style="border-collapse: collapse; width: 100%; border: 1px solid #ccc;">';m+="<tbody>";for(let x=0;x<r;x++){m+="<tr>";for(let b=0;b<a;b++)m+='<td style="border: 1px solid #ccc; padding: 8px; min-width: 50px;">&nbsp;</td>';m+="</tr>"}m+="</tbody></table><p>&nbsp;</p>",document.execCommand("insertHTML",!1,m),s(!1)};return t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>s(!n),className:o(n),title:"Insert Table",children:t.jsx(Rn,{size:18})}),n&&t.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 p-4 w-64",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Insert Table"}),t.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(Me,{size:16})})]}),t.jsxs("form",{onSubmit:d,children:[t.jsxs("div",{className:"flex gap-4 mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Rows"}),t.jsx("input",{type:"number",min:"1",max:"10",value:r,onChange:f=>l(parseInt(f.target.value)||1),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 outline-none"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Columns"}),t.jsx("input",{type:"number",min:"1",max:"10",value:a,onChange:f=>i(parseInt(f.target.value)||1),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 outline-none"})]})]}),t.jsx("button",{type:"submit",className:"w-full py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Insert"})]})]})]})},Wn=({config:o,activeFormats:n,currentTextFormat:s,updateActiveFormats:r,applyTextFormat:l,editorRef:a})=>{const[i,d]=y.useState(!1),f=b=>`p-2 rounded transition-colors ${b?"bg-blue-100 text-blue-600 hover:bg-blue-200":"text-gray-600 hover:bg-gray-100"}`,m=()=>t.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),x=[{value:"p",label:"Normal text",tag:"p"},{value:"h1",label:"Title",tag:"h1"},{value:"h2",label:"Subtitle",tag:"h2"},{value:"h3",label:"Heading 1",tag:"h3"},{value:"h4",label:"Heading 2",tag:"h4"},{value:"h5",label:"Heading 3",tag:"h5"},{value:"h6",label:"Heading 4",tag:"h6"}];return t.jsx("div",{className:"sticky top-0 z-40 w-full bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-center border",children:t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-1 max-w-7xl mx-auto w-full",children:[t.jsx(Un,{getButtonClass:f}),t.jsx(m,{}),o.showTextFormat&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>d(!i),onBlur:()=>setTimeout(()=>d(!1),200),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded min-w-[130px] justify-between transition-colors",children:[t.jsx("span",{className:"font-medium truncate max-w-[100px]",children:x.find(b=>b.value===s)?.label||"Normal text"}),t.jsx(Oe,{size:14,className:"text-gray-500"})]}),i&&t.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 min-w-[160px] max-h-[300px] overflow-y-auto w-full",children:x.map(b=>t.jsx("button",{onMouseDown:M=>{M.preventDefault(),l(b.tag)},className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 ${s===b.value?"bg-blue-50 text-blue-600 font-medium":"text-gray-700"}`,children:t.jsx("span",{className:b.tag==="p"?"":b.tag==="h1"?"text-2xl font-bold":b.tag==="h2"?"text-xl font-bold":b.tag==="h3"?"text-lg font-bold":"font-bold",children:b.label})},b.value))})]}),t.jsx(m,{})]}),t.jsx(Fn,{getButtonClass:f,updateActiveFormats:r}),t.jsx(m,{}),o.showInlineFormat&&t.jsxs(t.Fragment,{children:[t.jsx(At,{editorRef:a,activeFormats:{bold:n.bold,italic:n.italic,underline:n.underline,strikethrough:n.strikethrough},updateActiveFormats:r,getButtonClass:f}),t.jsx(m,{})]}),o.showAlignment&&t.jsxs(t.Fragment,{children:[t.jsx(vt,{activeFormats:{alignLeft:n.alignLeft,alignCenter:n.alignCenter,alignRight:n.alignRight,alignJustify:n.alignJustify},updateActiveFormats:r,getButtonClass:f}),t.jsx(m,{})]}),o.showList&&t.jsxs(t.Fragment,{children:[t.jsx(St,{editorRef:a,activeFormats:{bulletList:n.bulletList,numberedList:n.numberedList},updateActiveFormats:r,getButtonClass:f}),t.jsx(m,{})]}),o.showInsert&&t.jsxs(t.Fragment,{children:[t.jsx(Hn,{}),t.jsx(zn,{getButtonClass:f})]})]})})};/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:Ct,setPrototypeOf:kt,isFrozen:Gn,getPrototypeOf:Yn,getOwnPropertyDescriptor:Bn}=Object;let{freeze:G,seal:Z,create:tt}=Object,{apply:nt,construct:ot}=typeof Reflect<"u"&&Reflect;G||(G=function(n){return n}),Z||(Z=function(n){return n}),nt||(nt=function(n,s){for(var r=arguments.length,l=new Array(r>2?r-2:0),a=2;a<r;a++)l[a-2]=arguments[a];return n.apply(s,l)}),ot||(ot=function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),l=1;l<s;l++)r[l-1]=arguments[l];return new n(...r)});const Pe=B(Array.prototype.forEach),Vn=B(Array.prototype.lastIndexOf),Lt=B(Array.prototype.pop),Ae=B(Array.prototype.push),Xn=B(Array.prototype.splice),He=B(String.prototype.toLowerCase),rt=B(String.prototype.toString),at=B(String.prototype.match),ve=B(String.prototype.replace),Jn=B(String.prototype.indexOf),Zn=B(String.prototype.trim),q=B(Object.prototype.hasOwnProperty),Y=B(RegExp.prototype.test),Re=Kn(TypeError);function B(o){return function(n){n instanceof RegExp&&(n.lastIndex=0);for(var s=arguments.length,r=new Array(s>1?s-1:0),l=1;l<s;l++)r[l-1]=arguments[l];return nt(o,n,r)}}function Kn(o){return function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return ot(o,s)}}function T(o,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:He;kt&&kt(o,null);let r=n.length;for(;r--;){let l=n[r];if(typeof l=="string"){const a=s(l);a!==l&&(Gn(n)||(n[r]=a),l=a)}o[l]=!0}return o}function Qn(o){for(let n=0;n<o.length;n++)q(o,n)||(o[n]=null);return o}function ne(o){const n=tt(null);for(const[s,r]of Ct(o))q(o,s)&&(Array.isArray(r)?n[s]=Qn(r):r&&typeof r=="object"&&r.constructor===Object?n[s]=ne(r):n[s]=r);return n}function Se(o,n){for(;o!==null;){const r=Bn(o,n);if(r){if(r.get)return B(r.get);if(typeof r.value=="function")return B(r.value)}o=Yn(o)}function s(){return null}return s}const jt=G(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),st=G(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),lt=G(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),$n=G(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),it=G(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),qn=G(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ot=G(["#text"]),Mt=G(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ct=G(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),It=G(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ue=G(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),eo=Z(/\{\{[\w\W]*|[\w\W]*\}\}/gm),to=Z(/<%[\w\W]*|[\w\W]*%>/gm),no=Z(/\$\{[\w\W]*/gm),oo=Z(/^data-[\-\w.\u00B7-\uFFFF]+$/),ro=Z(/^aria-[\-\w]+$/),Dt=Z(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ao=Z(/^(?:\w+script|data):/i),so=Z(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Pt=Z(/^html$/i),lo=Z(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ht=Object.freeze({__proto__:null,ARIA_ATTR:ro,ATTR_WHITESPACE:so,CUSTOM_ELEMENT:lo,DATA_ATTR:oo,DOCTYPE_NAME:Pt,ERB_EXPR:to,IS_ALLOWED_URI:Dt,IS_SCRIPT_OR_DATA:ao,MUSTACHE_EXPR:eo,TMPLIT_EXPR:no});const Ce={element:1,text:3,progressingInstruction:7,comment:8,document:9},io=function(){return typeof window>"u"?null:window},co=function(n,s){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const l="data-tt-policy-suffix";s&&s.hasAttribute(l)&&(r=s.getAttribute(l));const a="dompurify"+(r?"#"+r:"");try{return n.createPolicy(a,{createHTML(i){return i},createScriptURL(i){return i}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Ut=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ft(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:io();const n=h=>Ft(h);if(n.version="3.3.1",n.removed=[],!o||!o.document||o.document.nodeType!==Ce.document||!o.Element)return n.isSupported=!1,n;let{document:s}=o;const r=s,l=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:i,Node:d,Element:f,NodeFilter:m,NamedNodeMap:x=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:b,DOMParser:M,trustedTypes:H}=o,E=f.prototype,N=Se(E,"cloneNode"),A=Se(E,"remove"),V=Se(E,"nextSibling"),k=Se(E,"childNodes"),I=Se(E,"parentNode");if(typeof i=="function"){const h=s.createElement("template");h.content&&h.content.ownerDocument&&(s=h.content.ownerDocument)}let v,L="";const{implementation:j,createNodeIterator:z,createDocumentFragment:X,getElementsByTagName:K}=s,{importNode:Q}=r;let S=Ut();n.isSupported=typeof Ct=="function"&&typeof I=="function"&&j&&j.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ee,ERB_EXPR:$,TMPLIT_EXPR:de,DATA_ATTR:Fe,ARIA_ATTR:ze,IS_SCRIPT_OR_DATA:We,ATTR_WHITESPACE:ke,CUSTOM_ELEMENT:Ge}=Ht;let{IS_ALLOWED_URI:c}=Ht,g=null;const R=T({},[...jt,...st,...lt,...it,...Ot]);let _=null;const te=T({},[...Mt,...ct,...It,...Ue]);let w=Object.seal(tt(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ae=null,me=null;const O=Object.seal(tt(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let se=!0,fe=!0,Ye=!1,zt=!0,be=!1,Be=!0,pe=!1,ut=!1,dt=!1,xe=!1,Ve=!1,Xe=!1,Wt=!0,Gt=!1;const po="user-content-";let mt=!0,Le=!1,ye={},oe=null;const ft=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Yt=null;const Bt=T({},["audio","video","img","source","image","track"]);let pt=null;const Vt=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",Ze="http://www.w3.org/2000/svg",le="http://www.w3.org/1999/xhtml";let Ee=le,gt=!1,ht=null;const go=T({},[Je,Ze,le],rt);let Ke=T({},["mi","mo","mn","ms","mtext"]),Qe=T({},["annotation-xml"]);const ho=T({},["title","style","font","a","script"]);let je=null;const bo=["application/xhtml+xml","text/html"],xo="text/html";let U=null,Te=null;const yo=s.createElement("form"),Xt=function(e){return e instanceof RegExp||e instanceof Function},bt=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Te&&Te===e)){if((!e||typeof e!="object")&&(e={}),e=ne(e),je=bo.indexOf(e.PARSER_MEDIA_TYPE)===-1?xo:e.PARSER_MEDIA_TYPE,U=je==="application/xhtml+xml"?rt:He,g=q(e,"ALLOWED_TAGS")?T({},e.ALLOWED_TAGS,U):R,_=q(e,"ALLOWED_ATTR")?T({},e.ALLOWED_ATTR,U):te,ht=q(e,"ALLOWED_NAMESPACES")?T({},e.ALLOWED_NAMESPACES,rt):go,pt=q(e,"ADD_URI_SAFE_ATTR")?T(ne(Vt),e.ADD_URI_SAFE_ATTR,U):Vt,Yt=q(e,"ADD_DATA_URI_TAGS")?T(ne(Bt),e.ADD_DATA_URI_TAGS,U):Bt,oe=q(e,"FORBID_CONTENTS")?T({},e.FORBID_CONTENTS,U):ft,ae=q(e,"FORBID_TAGS")?T({},e.FORBID_TAGS,U):ne({}),me=q(e,"FORBID_ATTR")?T({},e.FORBID_ATTR,U):ne({}),ye=q(e,"USE_PROFILES")?e.USE_PROFILES:!1,se=e.ALLOW_ARIA_ATTR!==!1,fe=e.ALLOW_DATA_ATTR!==!1,Ye=e.ALLOW_UNKNOWN_PROTOCOLS||!1,zt=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,be=e.SAFE_FOR_TEMPLATES||!1,Be=e.SAFE_FOR_XML!==!1,pe=e.WHOLE_DOCUMENT||!1,xe=e.RETURN_DOM||!1,Ve=e.RETURN_DOM_FRAGMENT||!1,Xe=e.RETURN_TRUSTED_TYPE||!1,dt=e.FORCE_BODY||!1,Wt=e.SANITIZE_DOM!==!1,Gt=e.SANITIZE_NAMED_PROPS||!1,mt=e.KEEP_CONTENT!==!1,Le=e.IN_PLACE||!1,c=e.ALLOWED_URI_REGEXP||Dt,Ee=e.NAMESPACE||le,Ke=e.MATHML_TEXT_INTEGRATION_POINTS||Ke,Qe=e.HTML_INTEGRATION_POINTS||Qe,w=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Xt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(w.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Xt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(w.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(w.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),be&&(fe=!1),Ve&&(xe=!0),ye&&(g=T({},Ot),_=[],ye.html===!0&&(T(g,jt),T(_,Mt)),ye.svg===!0&&(T(g,st),T(_,ct),T(_,Ue)),ye.svgFilters===!0&&(T(g,lt),T(_,ct),T(_,Ue)),ye.mathMl===!0&&(T(g,it),T(_,It),T(_,Ue))),e.ADD_TAGS&&(typeof e.ADD_TAGS=="function"?O.tagCheck=e.ADD_TAGS:(g===R&&(g=ne(g)),T(g,e.ADD_TAGS,U))),e.ADD_ATTR&&(typeof e.ADD_ATTR=="function"?O.attributeCheck=e.ADD_ATTR:(_===te&&(_=ne(_)),T(_,e.ADD_ATTR,U))),e.ADD_URI_SAFE_ATTR&&T(pt,e.ADD_URI_SAFE_ATTR,U),e.FORBID_CONTENTS&&(oe===ft&&(oe=ne(oe)),T(oe,e.FORBID_CONTENTS,U)),e.ADD_FORBID_CONTENTS&&(oe===ft&&(oe=ne(oe)),T(oe,e.ADD_FORBID_CONTENTS,U)),mt&&(g["#text"]=!0),pe&&T(g,["html","head","body"]),g.table&&(T(g,["tbody"]),delete ae.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw Re('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Re('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=e.TRUSTED_TYPES_POLICY,L=v.createHTML("")}else v===void 0&&(v=co(H,l)),v!==null&&typeof L=="string"&&(L=v.createHTML(""));G&&G(e),Te=e}},Jt=T({},[...st,...lt,...$n]),Zt=T({},[...it,...qn]),Eo=function(e){let u=I(e);(!u||!u.tagName)&&(u={namespaceURI:Ee,tagName:"template"});const p=He(e.tagName),C=He(u.tagName);return ht[e.namespaceURI]?e.namespaceURI===Ze?u.namespaceURI===le?p==="svg":u.namespaceURI===Je?p==="svg"&&(C==="annotation-xml"||Ke[C]):!!Jt[p]:e.namespaceURI===Je?u.namespaceURI===le?p==="math":u.namespaceURI===Ze?p==="math"&&Qe[C]:!!Zt[p]:e.namespaceURI===le?u.namespaceURI===Ze&&!Qe[C]||u.namespaceURI===Je&&!Ke[C]?!1:!Zt[p]&&(ho[p]||!Jt[p]):!!(je==="application/xhtml+xml"&&ht[e.namespaceURI]):!1},re=function(e){Ae(n.removed,{element:e});try{I(e).removeChild(e)}catch{A(e)}},ge=function(e,u){try{Ae(n.removed,{attribute:u.getAttributeNode(e),from:u})}catch{Ae(n.removed,{attribute:null,from:u})}if(u.removeAttribute(e),e==="is")if(xe||Ve)try{re(u)}catch{}else try{u.setAttribute(e,"")}catch{}},Kt=function(e){let u=null,p=null;if(dt)e="<remove></remove>"+e;else{const D=at(e,/^[\r\n\t ]+/);p=D&&D[0]}je==="application/xhtml+xml"&&Ee===le&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const C=v?v.createHTML(e):e;if(Ee===le)try{u=new M().parseFromString(C,je)}catch{}if(!u||!u.documentElement){u=j.createDocument(Ee,"template",null);try{u.documentElement.innerHTML=gt?L:C}catch{}}const W=u.body||u.documentElement;return e&&p&&W.insertBefore(s.createTextNode(p),W.childNodes[0]||null),Ee===le?K.call(u,pe?"html":"body")[0]:pe?u.documentElement:W},Qt=function(e){return z.call(e.ownerDocument||e,e,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT|m.SHOW_PROCESSING_INSTRUCTION|m.SHOW_CDATA_SECTION,null)},xt=function(e){return e instanceof b&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof x)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},$t=function(e){return typeof d=="function"&&e instanceof d};function ie(h,e,u){Pe(h,p=>{p.call(n,e,u,Te)})}const qt=function(e){let u=null;if(ie(S.beforeSanitizeElements,e,null),xt(e))return re(e),!0;const p=U(e.nodeName);if(ie(S.uponSanitizeElement,e,{tagName:p,allowedTags:g}),Be&&e.hasChildNodes()&&!$t(e.firstElementChild)&&Y(/<[/\w!]/g,e.innerHTML)&&Y(/<[/\w!]/g,e.textContent)||e.nodeType===Ce.progressingInstruction||Be&&e.nodeType===Ce.comment&&Y(/<[/\w]/g,e.data))return re(e),!0;if(!(O.tagCheck instanceof Function&&O.tagCheck(p))&&(!g[p]||ae[p])){if(!ae[p]&&tn(p)&&(w.tagNameCheck instanceof RegExp&&Y(w.tagNameCheck,p)||w.tagNameCheck instanceof Function&&w.tagNameCheck(p)))return!1;if(mt&&!oe[p]){const C=I(e)||e.parentNode,W=k(e)||e.childNodes;if(W&&C){const D=W.length;for(let J=D-1;J>=0;--J){const ce=N(W[J],!0);ce.__removalCount=(e.__removalCount||0)+1,C.insertBefore(ce,V(e))}}}return re(e),!0}return e instanceof f&&!Eo(e)||(p==="noscript"||p==="noembed"||p==="noframes")&&Y(/<\/no(script|embed|frames)/i,e.innerHTML)?(re(e),!0):(be&&e.nodeType===Ce.text&&(u=e.textContent,Pe([ee,$,de],C=>{u=ve(u,C," ")}),e.textContent!==u&&(Ae(n.removed,{element:e.cloneNode()}),e.textContent=u)),ie(S.afterSanitizeElements,e,null),!1)},en=function(e,u,p){if(Wt&&(u==="id"||u==="name")&&(p in s||p in yo))return!1;if(!(fe&&!me[u]&&Y(Fe,u))){if(!(se&&Y(ze,u))){if(!(O.attributeCheck instanceof Function&&O.attributeCheck(u,e))){if(!_[u]||me[u]){if(!(tn(e)&&(w.tagNameCheck instanceof RegExp&&Y(w.tagNameCheck,e)||w.tagNameCheck instanceof Function&&w.tagNameCheck(e))&&(w.attributeNameCheck instanceof RegExp&&Y(w.attributeNameCheck,u)||w.attributeNameCheck instanceof Function&&w.attributeNameCheck(u,e))||u==="is"&&w.allowCustomizedBuiltInElements&&(w.tagNameCheck instanceof RegExp&&Y(w.tagNameCheck,p)||w.tagNameCheck instanceof Function&&w.tagNameCheck(p))))return!1}else if(!pt[u]){if(!Y(c,ve(p,ke,""))){if(!((u==="src"||u==="xlink:href"||u==="href")&&e!=="script"&&Jn(p,"data:")===0&&Yt[e])){if(!(Ye&&!Y(We,ve(p,ke,"")))){if(p)return!1}}}}}}}return!0},tn=function(e){return e!=="annotation-xml"&&at(e,Ge)},nn=function(e){ie(S.beforeSanitizeAttributes,e,null);const{attributes:u}=e;if(!u||xt(e))return;const p={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_,forceKeepAttr:void 0};let C=u.length;for(;C--;){const W=u[C],{name:D,namespaceURI:J,value:ce}=W,Ne=U(D),yt=ce;let F=D==="value"?yt:Zn(yt);if(p.attrName=Ne,p.attrValue=F,p.keepAttr=!0,p.forceKeepAttr=void 0,ie(S.uponSanitizeAttribute,e,p),F=p.attrValue,Gt&&(Ne==="id"||Ne==="name")&&(ge(D,e),F=po+F),Be&&Y(/((--!?|])>)|<\/(style|title|textarea)/i,F)){ge(D,e);continue}if(Ne==="attributename"&&at(F,"href")){ge(D,e);continue}if(p.forceKeepAttr)continue;if(!p.keepAttr){ge(D,e);continue}if(!zt&&Y(/\/>/i,F)){ge(D,e);continue}be&&Pe([ee,$,de],rn=>{F=ve(F,rn," ")});const on=U(e.nodeName);if(!en(on,Ne,F)){ge(D,e);continue}if(v&&typeof H=="object"&&typeof H.getAttributeType=="function"&&!J)switch(H.getAttributeType(on,Ne)){case"TrustedHTML":{F=v.createHTML(F);break}case"TrustedScriptURL":{F=v.createScriptURL(F);break}}if(F!==yt)try{J?e.setAttributeNS(J,D,F):e.setAttribute(D,F),xt(e)?re(e):Lt(n.removed)}catch{ge(D,e)}}ie(S.afterSanitizeAttributes,e,null)},To=function h(e){let u=null;const p=Qt(e);for(ie(S.beforeSanitizeShadowDOM,e,null);u=p.nextNode();)ie(S.uponSanitizeShadowNode,u,null),qt(u),nn(u),u.content instanceof a&&h(u.content);ie(S.afterSanitizeShadowDOM,e,null)};return n.sanitize=function(h){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=null,p=null,C=null,W=null;if(gt=!h,gt&&(h="<!-->"),typeof h!="string"&&!$t(h))if(typeof h.toString=="function"){if(h=h.toString(),typeof h!="string")throw Re("dirty is not a string, aborting")}else throw Re("toString is not a function");if(!n.isSupported)return h;if(ut||bt(e),n.removed=[],typeof h=="string"&&(Le=!1),Le){if(h.nodeName){const ce=U(h.nodeName);if(!g[ce]||ae[ce])throw Re("root node is forbidden and cannot be sanitized in-place")}}else if(h instanceof d)u=Kt("<!---->"),p=u.ownerDocument.importNode(h,!0),p.nodeType===Ce.element&&p.nodeName==="BODY"||p.nodeName==="HTML"?u=p:u.appendChild(p);else{if(!xe&&!be&&!pe&&h.indexOf("<")===-1)return v&&Xe?v.createHTML(h):h;if(u=Kt(h),!u)return xe?null:Xe?L:""}u&&dt&&re(u.firstChild);const D=Qt(Le?h:u);for(;C=D.nextNode();)qt(C),nn(C),C.content instanceof a&&To(C.content);if(Le)return h;if(xe){if(Ve)for(W=X.call(u.ownerDocument);u.firstChild;)W.appendChild(u.firstChild);else W=u;return(_.shadowroot||_.shadowrootmode)&&(W=Q.call(r,W,!0)),W}let J=pe?u.outerHTML:u.innerHTML;return pe&&g["!doctype"]&&u.ownerDocument&&u.ownerDocument.doctype&&u.ownerDocument.doctype.name&&Y(Pt,u.ownerDocument.doctype.name)&&(J="<!DOCTYPE "+u.ownerDocument.doctype.name+`>
`+J),be&&Pe([ee,$,de],ce=>{J=ve(J,ce," ")}),v&&Xe?v.createHTML(J):J},n.setConfig=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};bt(h),ut=!0},n.clearConfig=function(){Te=null,ut=!1},n.isValidAttribute=function(h,e,u){Te||bt({});const p=U(h),C=U(e);return en(p,C,u)},n.addHook=function(h,e){typeof e=="function"&&Ae(S[h],e)},n.removeHook=function(h,e){if(e!==void 0){const u=Vn(S[h],e);return u===-1?void 0:Xn(S[h],u,1)[0]}return Lt(S[h])},n.removeHooks=function(h){S[h]=[]},n.removeAllHooks=function(){S=Ut()},n}var uo=Ft();const mo=({content:o="",onChange:n,onBlur:s,onFocus:r,config:l={showTextFormat:!0,showInlineFormat:!0,showAlignment:!0,showList:!0,showInsert:!0}})=>{const a=y.useRef(null),[i,d]=y.useState({bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,bulletList:!1,numberedList:!1}),[f,m]=y.useState("p"),x=A=>{const V=window.getSelection();if(!V||V.rangeCount===0)return;const k=V.getRangeAt(0);let I=k.commonAncestorContainer;I.nodeType===Node.TEXT_NODE&&(I=I.parentNode);let v=null,L=I;for(;L&&L!==a.current;){if(L.nodeType===Node.ELEMENT_NODE){const j=L,z=j.tagName.toLowerCase();if(["p","h1","h2","h3","h4","h5","h6","div"].includes(z)){v=j;break}}L=L.parentNode}if(v&&v!==a.current){const j=document.createElement(A);j.innerHTML=v.innerHTML,v.style.textAlign&&(j.style.textAlign=v.style.textAlign),v.parentNode?.replaceChild(j,v),m(A);const z=document.createRange();z.selectNodeContents(j),V.removeAllRanges(),V.addRange(z)}else{const j=document.createElement(A);if(k.toString())try{k.surroundContents(j)}catch{const X=k.extractContents();j.appendChild(X),k.insertNode(j)}else{j.innerHTML="<br>",k.insertNode(j);const z=document.createRange();z.setStart(j,0),z.collapse(!0),V.removeAllRanges(),V.addRange(z)}m(A)}setTimeout(()=>E(),10)},b=()=>{if(a.current&&n){const A=a.current.innerHTML;n(A)}},M=()=>{if(s&&a.current){const A=a.current.innerHTML;s(A)}},H=()=>{r&&r()};y.useEffect(()=>{if(a.current&&o!==void 0){const A=uo.sanitize(o);a.current.innerHTML!==A&&(a.current.innerHTML=A)}},[o]);const E=()=>{const A=window.getSelection();if(!A||A.rangeCount===0)return;let k=A.getRangeAt(0).commonAncestorContainer;k.nodeType===Node.TEXT_NODE&&(k=k.parentNode);let I=k,v="p";for(;I&&I!==a.current;){if(["H1","H2","H3","H4","H5","H6","P"].includes(I.tagName)){v=I.tagName.toLowerCase();break}I=I.parentElement}m(v);let L=k,j=!1,z=!1;for(;L&&L!==a.current;){if(L.tagName==="UL"){j=!0;break}else if(L.tagName==="OL"){z=!0;break}L=L.parentElement}const X=ee=>{let $=k;for(;$&&$!==a.current;){if($.nodeType===Node.ELEMENT_NODE&&$.tagName.toLowerCase()===ee.toLowerCase())return!0;$=$.parentNode}return!1};let K=k;for(;K&&K!==a.current;){if(K.nodeType===Node.ELEMENT_NODE){const ee=K.tagName.toLowerCase();if(["h1","h2","h3","h4","h5","h6","p"].includes(ee)){m(ee);break}}K=K.parentNode}(K===a.current||!K)&&m("p");let Q=k;for(;Q&&Q!==a.current&&Q.nodeType!==Node.ELEMENT_NODE;)Q=Q.parentNode;const S=Q&&Q.nodeType===Node.ELEMENT_NODE?Q.style.textAlign:"";d({bold:X("strong")||X("b"),italic:X("em")||X("i"),underline:X("u"),strikethrough:X("s")||X("strike")||X("del"),alignLeft:S===""||S==="left",alignCenter:S==="center",alignRight:S==="right",alignJustify:S==="justify",bulletList:j,numberedList:z})},N=()=>{const A=window.getSelection();if(A&&A.rangeCount>0){const V=A.getRangeAt(0);a.current?.contains(V.commonAncestorContainer)&&E()}};return y.useEffect(()=>(document.addEventListener("selectionchange",N),()=>{document.removeEventListener("selectionchange",N)}),[]),t.jsxs("div",{className:"teddy-editor w-full min-h-screen bg-gray-100 flex flex-col items-center pb-8 relative",children:[t.jsx(Wn,{config:l,activeFormats:i,currentTextFormat:f,updateActiveFormats:E,applyTextFormat:x,editorRef:a}),t.jsx(Ln,{editorRef:a,activeFormats:i,currentTextFormat:f,updateActiveFormats:E,applyTextFormat:x}),t.jsx("div",{ref:a,contentEditable:!0,className:"document-page outline-none focus:ring-0 prose prose-headings:mt-4 prose-headings:mb-2 max-w-4xl mx-auto",style:{whiteSpace:"pre-wrap",minHeight:"1000px"},onMouseUp:E,onKeyUp:E,onInput:b,onBlur:M,onFocus:H})]})};function fo(){return t.jsx("div",{children:t.jsx(mo,{content:"<p>Initial content</p>",onChange:o=>console.log("Content changed:",o),onBlur:o=>console.log("Editor lost focus",o),onFocus:()=>console.log("Editor gained focus")})})}return fo});
